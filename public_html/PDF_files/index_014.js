!function(t,n){"object"==typeof exports&&"object"==typeof module?module.exports=n(require("PDFViewCtrl"),require("UIExtension")):"function"==typeof define&&define.amd?define(["PDFViewCtrl","UIExtension"],n):"object"==typeof exports?exports.UndoRedoAddon=n(require("PDFViewCtrl"),require("UIExtension")):t.UndoRedoAddon=n(t.PDFViewCtrl,t.UIExtension)}(self,(function(t,n){return function(){var e={1843:function(t){t.exports=null},8552:function(t,n,e){var o=e(852)(e(5639),"DataView");t.exports=o},1989:function(t,n,e){var o=e(1789),r=e(401),i=e(7667),a=e(1327),s=e(1866);function c(t){var n=-1,e=null==t?0:t.length;for(this.clear();++n<e;){var o=t[n];this.set(o[0],o[1])}}c.prototype.clear=o,c.prototype.delete=r,c.prototype.get=i,c.prototype.has=a,c.prototype.set=s,t.exports=c},8407:function(t,n,e){var o=e(7040),r=e(4125),i=e(2117),a=e(7529),s=e(4705);function c(t){var n=-1,e=null==t?0:t.length;for(this.clear();++n<e;){var o=t[n];this.set(o[0],o[1])}}c.prototype.clear=o,c.prototype.delete=r,c.prototype.get=i,c.prototype.has=a,c.prototype.set=s,t.exports=c},7071:function(t,n,e){var o=e(852)(e(5639),"Map");t.exports=o},3369:function(t,n,e){var o=e(4785),r=e(1285),i=e(6e3),a=e(9916),s=e(5265);function c(t){var n=-1,e=null==t?0:t.length;for(this.clear();++n<e;){var o=t[n];this.set(o[0],o[1])}}c.prototype.clear=o,c.prototype.delete=r,c.prototype.get=i,c.prototype.has=a,c.prototype.set=s,t.exports=c},3818:function(t,n,e){var o=e(852)(e(5639),"Promise");t.exports=o},8525:function(t,n,e){var o=e(852)(e(5639),"Set");t.exports=o},6384:function(t,n,e){var o=e(8407),r=e(7465),i=e(3779),a=e(7599),s=e(4758),c=e(4309);function u(t){var n=this.__data__=new o(t);this.size=n.size}u.prototype.clear=r,u.prototype.delete=i,u.prototype.get=a,u.prototype.has=s,u.prototype.set=c,t.exports=u},2705:function(t,n,e){var o=e(5639).Symbol;t.exports=o},1149:function(t,n,e){var o=e(5639).Uint8Array;t.exports=o},577:function(t,n,e){var o=e(852)(e(5639),"WeakMap");t.exports=o},7412:function(t){t.exports=function(t,n){for(var e=-1,o=null==t?0:t.length;++e<o&&!1!==n(t[e],e,t););return t}},4963:function(t){t.exports=function(t,n){for(var e=-1,o=null==t?0:t.length,r=0,i=[];++e<o;){var a=t[e];n(a,e,t)&&(i[r++]=a)}return i}},4636:function(t,n,e){var o=e(2545),r=e(5694),i=e(1469),a=e(4144),s=e(5776),c=e(6719),u=Object.prototype.hasOwnProperty;t.exports=function(t,n){var e=i(t),l=!e&&r(t),f=!e&&!l&&a(t),p=!e&&!l&&!f&&c(t),d=e||l||f||p,h=d?o(t.length,String):[],y=h.length;for(var E in t)!n&&!u.call(t,E)||d&&("length"==E||f&&("offset"==E||"parent"==E)||p&&("buffer"==E||"byteLength"==E||"byteOffset"==E)||s(E,y))||h.push(E);return h}},2488:function(t){t.exports=function(t,n){for(var e=-1,o=n.length,r=t.length;++e<o;)t[r+e]=n[e];return t}},4865:function(t,n,e){var o=e(9465),r=e(7813),i=Object.prototype.hasOwnProperty;t.exports=function(t,n,e){var a=t[n];i.call(t,n)&&r(a,e)&&(void 0!==e||n in t)||o(t,n,e)}},8470:function(t,n,e){var o=e(7813);t.exports=function(t,n){for(var e=t.length;e--;)if(o(t[e][0],n))return e;return-1}},4037:function(t,n,e){var o=e(8363),r=e(3674);t.exports=function(t,n){return t&&o(n,r(n),t)}},3886:function(t,n,e){var o=e(8363),r=e(1704);t.exports=function(t,n){return t&&o(n,r(n),t)}},9465:function(t,n,e){var o=e(8777);t.exports=function(t,n,e){"__proto__"==n&&o?o(t,n,{configurable:!0,enumerable:!0,value:e,writable:!0}):t[n]=e}},5990:function(t,n,e){var o=e(6384),r=e(7412),i=e(4865),a=e(4037),s=e(3886),c=e(4626),u=e(6450),l=e(8805),f=e(1911),p=e(8234),d=e(6904),h=e(4160),y=e(3824),E=e(9148),g=e(8517),v=e(1469),T=e(4144),m=e(6688),S=e(3218),A=e(2928),O=e(3674),b=e(1704),R="[object Arguments]",w="[object Function]",N="[object Object]",I={};I[R]=I["[object Array]"]=I["[object ArrayBuffer]"]=I["[object DataView]"]=I["[object Boolean]"]=I["[object Date]"]=I["[object Float32Array]"]=I["[object Float64Array]"]=I["[object Int8Array]"]=I["[object Int16Array]"]=I["[object Int32Array]"]=I["[object Map]"]=I["[object Number]"]=I[N]=I["[object RegExp]"]=I["[object Set]"]=I["[object String]"]=I["[object Symbol]"]=I["[object Uint8Array]"]=I["[object Uint8ClampedArray]"]=I["[object Uint16Array]"]=I["[object Uint32Array]"]=!0,I["[object Error]"]=I[w]=I["[object WeakMap]"]=!1,t.exports=function t(n,e,x,C,_,P){var L,D=1&e,j=2&e,k=4&e;if(x&&(L=_?x(n,C,_,P):x(n)),void 0!==L)return L;if(!S(n))return n;var M=v(n);if(M){if(L=y(n),!D)return u(n,L)}else{var U=h(n),V=U==w||"[object GeneratorFunction]"==U;if(T(n))return c(n,D);if(U==N||U==R||V&&!_){if(L=j||V?{}:g(n),!D)return j?f(n,s(L,n)):l(n,a(L,n))}else{if(!I[U])return _?n:{};L=E(n,U,D)}}P||(P=new o);var F=P.get(n);if(F)return F;P.set(n,L),A(n)?n.forEach((function(o){L.add(t(o,e,x,o,n,P))})):m(n)&&n.forEach((function(o,r){L.set(r,t(o,e,x,r,n,P))}));var B=M?void 0:(k?j?d:p:j?b:O)(n);return r(B||n,(function(o,r){B&&(o=n[r=o]),i(L,r,t(o,e,x,r,n,P))})),L}},3118:function(t,n,e){var o=e(3218),r=Object.create,i=function(){function t(){}return function(n){if(!o(n))return{};if(r)return r(n);t.prototype=n;var e=new t;return t.prototype=void 0,e}}();t.exports=i},8866:function(t,n,e){var o=e(2488),r=e(1469);t.exports=function(t,n,e){var i=n(t);return r(t)?i:o(i,e(t))}},4239:function(t,n,e){var o=e(2705),r=e(9607),i=e(2333),a=o?o.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":a&&a in Object(t)?r(t):i(t)}},9454:function(t,n,e){var o=e(4239),r=e(7005);t.exports=function(t){return r(t)&&"[object Arguments]"==o(t)}},5588:function(t,n,e){var o=e(4160),r=e(7005);t.exports=function(t){return r(t)&&"[object Map]"==o(t)}},8458:function(t,n,e){var o=e(3560),r=e(5346),i=e(3218),a=e(346),s=/^\[object .+?Constructor\]$/,c=Function.prototype,u=Object.prototype,l=c.toString,f=u.hasOwnProperty,p=RegExp("^"+l.call(f).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=function(t){return!(!i(t)||r(t))&&(o(t)?p:s).test(a(t))}},9221:function(t,n,e){var o=e(4160),r=e(7005);t.exports=function(t){return r(t)&&"[object Set]"==o(t)}},8749:function(t,n,e){var o=e(4239),r=e(1780),i=e(7005),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,t.exports=function(t){return i(t)&&r(t.length)&&!!a[o(t)]}},280:function(t,n,e){var o=e(5726),r=e(6916),i=Object.prototype.hasOwnProperty;t.exports=function(t){if(!o(t))return r(t);var n=[];for(var e in Object(t))i.call(t,e)&&"constructor"!=e&&n.push(e);return n}},313:function(t,n,e){var o=e(3218),r=e(5726),i=e(3498),a=Object.prototype.hasOwnProperty;t.exports=function(t){if(!o(t))return i(t);var n=r(t),e=[];for(var s in t)("constructor"!=s||!n&&a.call(t,s))&&e.push(s);return e}},2545:function(t){t.exports=function(t,n){for(var e=-1,o=Array(t);++e<t;)o[e]=n(e);return o}},1717:function(t){t.exports=function(t){return function(n){return t(n)}}},4318:function(t,n,e){var o=e(1149);t.exports=function(t){var n=new t.constructor(t.byteLength);return new o(n).set(new o(t)),n}},4626:function(t,n,e){t=e.nmd(t);var o=e(5639),r=n&&!n.nodeType&&n,i=r&&t&&!t.nodeType&&t,a=i&&i.exports===r?o.Buffer:void 0,s=a?a.allocUnsafe:void 0;t.exports=function(t,n){if(n)return t.slice();var e=t.length,o=s?s(e):new t.constructor(e);return t.copy(o),o}},7157:function(t,n,e){var o=e(4318);t.exports=function(t,n){var e=n?o(t.buffer):t.buffer;return new t.constructor(e,t.byteOffset,t.byteLength)}},3147:function(t){var n=/\w*$/;t.exports=function(t){var e=new t.constructor(t.source,n.exec(t));return e.lastIndex=t.lastIndex,e}},419:function(t,n,e){var o=e(2705),r=o?o.prototype:void 0,i=r?r.valueOf:void 0;t.exports=function(t){return i?Object(i.call(t)):{}}},7133:function(t,n,e){var o=e(4318);t.exports=function(t,n){var e=n?o(t.buffer):t.buffer;return new t.constructor(e,t.byteOffset,t.length)}},6450:function(t){t.exports=function(t,n){var e=-1,o=t.length;for(n||(n=Array(o));++e<o;)n[e]=t[e];return n}},8363:function(t,n,e){var o=e(4865),r=e(9465);t.exports=function(t,n,e,i){var a=!e;e||(e={});for(var s=-1,c=n.length;++s<c;){var u=n[s],l=i?i(e[u],t[u],u,e,t):void 0;void 0===l&&(l=t[u]),a?r(e,u,l):o(e,u,l)}return e}},8805:function(t,n,e){var o=e(8363),r=e(9551);t.exports=function(t,n){return o(t,r(t),n)}},1911:function(t,n,e){var o=e(8363),r=e(1442);t.exports=function(t,n){return o(t,r(t),n)}},4429:function(t,n,e){var o=e(5639)["__core-js_shared__"];t.exports=o},8777:function(t,n,e){var o=e(852),r=function(){try{var t=o(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();t.exports=r},1957:function(t,n,e){var o="object"==typeof e.g&&e.g&&e.g.Object===Object&&e.g;t.exports=o},8234:function(t,n,e){var o=e(8866),r=e(9551),i=e(3674);t.exports=function(t){return o(t,i,r)}},6904:function(t,n,e){var o=e(8866),r=e(1442),i=e(1704);t.exports=function(t){return o(t,i,r)}},5050:function(t,n,e){var o=e(7019);t.exports=function(t,n){var e=t.__data__;return o(n)?e["string"==typeof n?"string":"hash"]:e.map}},852:function(t,n,e){var o=e(8458),r=e(7801);t.exports=function(t,n){var e=r(t,n);return o(e)?e:void 0}},5924:function(t,n,e){var o=e(5569)(Object.getPrototypeOf,Object);t.exports=o},9607:function(t,n,e){var o=e(2705),r=Object.prototype,i=r.hasOwnProperty,a=r.toString,s=o?o.toStringTag:void 0;t.exports=function(t){var n=i.call(t,s),e=t[s];try{t[s]=void 0;var o=!0}catch(t){}var r=a.call(t);return o&&(n?t[s]=e:delete t[s]),r}},9551:function(t,n,e){var o=e(4963),r=e(479),i=Object.prototype.propertyIsEnumerable,a=Object.getOwnPropertySymbols,s=a?function(t){return null==t?[]:(t=Object(t),o(a(t),(function(n){return i.call(t,n)})))}:r;t.exports=s},1442:function(t,n,e){var o=e(2488),r=e(5924),i=e(9551),a=e(479),s=Object.getOwnPropertySymbols?function(t){for(var n=[];t;)o(n,i(t)),t=r(t);return n}:a;t.exports=s},4160:function(t,n,e){var o=e(8552),r=e(7071),i=e(3818),a=e(8525),s=e(577),c=e(4239),u=e(346),l="[object Map]",f="[object Promise]",p="[object Set]",d="[object WeakMap]",h="[object DataView]",y=u(o),E=u(r),g=u(i),v=u(a),T=u(s),m=c;(o&&m(new o(new ArrayBuffer(1)))!=h||r&&m(new r)!=l||i&&m(i.resolve())!=f||a&&m(new a)!=p||s&&m(new s)!=d)&&(m=function(t){var n=c(t),e="[object Object]"==n?t.constructor:void 0,o=e?u(e):"";if(o)switch(o){case y:return h;case E:return l;case g:return f;case v:return p;case T:return d}return n}),t.exports=m},7801:function(t){t.exports=function(t,n){return null==t?void 0:t[n]}},1789:function(t,n,e){var o=e(4536);t.exports=function(){this.__data__=o?o(null):{},this.size=0}},401:function(t){t.exports=function(t){var n=this.has(t)&&delete this.__data__[t];return this.size-=n?1:0,n}},7667:function(t,n,e){var o=e(4536),r=Object.prototype.hasOwnProperty;t.exports=function(t){var n=this.__data__;if(o){var e=n[t];return"__lodash_hash_undefined__"===e?void 0:e}return r.call(n,t)?n[t]:void 0}},1327:function(t,n,e){var o=e(4536),r=Object.prototype.hasOwnProperty;t.exports=function(t){var n=this.__data__;return o?void 0!==n[t]:r.call(n,t)}},1866:function(t,n,e){var o=e(4536);t.exports=function(t,n){var e=this.__data__;return this.size+=this.has(t)?0:1,e[t]=o&&void 0===n?"__lodash_hash_undefined__":n,this}},3824:function(t){var n=Object.prototype.hasOwnProperty;t.exports=function(t){var e=t.length,o=new t.constructor(e);return e&&"string"==typeof t[0]&&n.call(t,"index")&&(o.index=t.index,o.input=t.input),o}},9148:function(t,n,e){var o=e(4318),r=e(7157),i=e(3147),a=e(419),s=e(7133);t.exports=function(t,n,e){var c=t.constructor;switch(n){case"[object ArrayBuffer]":return o(t);case"[object Boolean]":case"[object Date]":return new c(+t);case"[object DataView]":return r(t,e);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return s(t,e);case"[object Map]":case"[object Set]":return new c;case"[object Number]":case"[object String]":return new c(t);case"[object RegExp]":return i(t);case"[object Symbol]":return a(t)}}},8517:function(t,n,e){var o=e(3118),r=e(5924),i=e(5726);t.exports=function(t){return"function"!=typeof t.constructor||i(t)?{}:o(r(t))}},5776:function(t){var n=/^(?:0|[1-9]\d*)$/;t.exports=function(t,e){var o=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==o||"symbol"!=o&&n.test(t))&&t>-1&&t%1==0&&t<e}},7019:function(t){t.exports=function(t){var n=typeof t;return"string"==n||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==t:null===t}},5346:function(t,n,e){var o,r=e(4429),i=(o=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||""))?"Symbol(src)_1."+o:"";t.exports=function(t){return!!i&&i in t}},5726:function(t){var n=Object.prototype;t.exports=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||n)}},7040:function(t){t.exports=function(){this.__data__=[],this.size=0}},4125:function(t,n,e){var o=e(8470),r=Array.prototype.splice;t.exports=function(t){var n=this.__data__,e=o(n,t);return!(e<0)&&(e==n.length-1?n.pop():r.call(n,e,1),--this.size,!0)}},2117:function(t,n,e){var o=e(8470);t.exports=function(t){var n=this.__data__,e=o(n,t);return e<0?void 0:n[e][1]}},7529:function(t,n,e){var o=e(8470);t.exports=function(t){return o(this.__data__,t)>-1}},4705:function(t,n,e){var o=e(8470);t.exports=function(t,n){var e=this.__data__,r=o(e,t);return r<0?(++this.size,e.push([t,n])):e[r][1]=n,this}},4785:function(t,n,e){var o=e(1989),r=e(8407),i=e(7071);t.exports=function(){this.size=0,this.__data__={hash:new o,map:new(i||r),string:new o}}},1285:function(t,n,e){var o=e(5050);t.exports=function(t){var n=o(this,t).delete(t);return this.size-=n?1:0,n}},6e3:function(t,n,e){var o=e(5050);t.exports=function(t){return o(this,t).get(t)}},9916:function(t,n,e){var o=e(5050);t.exports=function(t){return o(this,t).has(t)}},5265:function(t,n,e){var o=e(5050);t.exports=function(t,n){var e=o(this,t),r=e.size;return e.set(t,n),this.size+=e.size==r?0:1,this}},4536:function(t,n,e){var o=e(852)(Object,"create");t.exports=o},6916:function(t,n,e){var o=e(5569)(Object.keys,Object);t.exports=o},3498:function(t){t.exports=function(t){var n=[];if(null!=t)for(var e in Object(t))n.push(e);return n}},1167:function(t,n,e){t=e.nmd(t);var o=e(1957),r=n&&!n.nodeType&&n,i=r&&t&&!t.nodeType&&t,a=i&&i.exports===r&&o.process,s=function(){try{var t=i&&i.require&&i.require("util").types;return t||a&&a.binding&&a.binding("util")}catch(t){}}();t.exports=s},2333:function(t){var n=Object.prototype.toString;t.exports=function(t){return n.call(t)}},5569:function(t){t.exports=function(t,n){return function(e){return t(n(e))}}},5639:function(t,n,e){var o=e(1957),r="object"==typeof self&&self&&self.Object===Object&&self,i=o||r||Function("return this")();t.exports=i},7465:function(t,n,e){var o=e(8407);t.exports=function(){this.__data__=new o,this.size=0}},3779:function(t){t.exports=function(t){var n=this.__data__,e=n.delete(t);return this.size=n.size,e}},7599:function(t){t.exports=function(t){return this.__data__.get(t)}},4758:function(t){t.exports=function(t){return this.__data__.has(t)}},4309:function(t,n,e){var o=e(8407),r=e(7071),i=e(3369);t.exports=function(t,n){var e=this.__data__;if(e instanceof o){var a=e.__data__;if(!r||a.length<199)return a.push([t,n]),this.size=++e.size,this;e=this.__data__=new i(a)}return e.set(t,n),this.size=e.size,this}},346:function(t){var n=Function.prototype.toString;t.exports=function(t){if(null!=t){try{return n.call(t)}catch(t){}try{return t+""}catch(t){}}return""}},361:function(t,n,e){var o=e(5990);t.exports=function(t){return o(t,5)}},7813:function(t){t.exports=function(t,n){return t===n||t!=t&&n!=n}},5694:function(t,n,e){var o=e(9454),r=e(7005),i=Object.prototype,a=i.hasOwnProperty,s=i.propertyIsEnumerable,c=o(function(){return arguments}())?o:function(t){return r(t)&&a.call(t,"callee")&&!s.call(t,"callee")};t.exports=c},1469:function(t){var n=Array.isArray;t.exports=n},8612:function(t,n,e){var o=e(3560),r=e(1780);t.exports=function(t){return null!=t&&r(t.length)&&!o(t)}},4144:function(t,n,e){t=e.nmd(t);var o=e(5639),r=e(5062),i=n&&!n.nodeType&&n,a=i&&t&&!t.nodeType&&t,s=a&&a.exports===i?o.Buffer:void 0,c=(s?s.isBuffer:void 0)||r;t.exports=c},3560:function(t,n,e){var o=e(4239),r=e(3218);t.exports=function(t){if(!r(t))return!1;var n=o(t);return"[object Function]"==n||"[object GeneratorFunction]"==n||"[object AsyncFunction]"==n||"[object Proxy]"==n}},1780:function(t){t.exports=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}},6688:function(t,n,e){var o=e(5588),r=e(1717),i=e(1167),a=i&&i.isMap,s=a?r(a):o;t.exports=s},3218:function(t){t.exports=function(t){var n=typeof t;return null!=t&&("object"==n||"function"==n)}},7005:function(t){t.exports=function(t){return null!=t&&"object"==typeof t}},2928:function(t,n,e){var o=e(9221),r=e(1717),i=e(1167),a=i&&i.isSet,s=a?r(a):o;t.exports=s},6719:function(t,n,e){var o=e(8749),r=e(1717),i=e(1167),a=i&&i.isTypedArray,s=a?r(a):o;t.exports=s},3674:function(t,n,e){var o=e(4636),r=e(280),i=e(8612);t.exports=function(t){return i(t)?o(t):r(t)}},1704:function(t,n,e){var o=e(4636),r=e(313),i=e(8612);t.exports=function(t){return i(t)?o(t,!0):r(t)}},479:function(t){t.exports=function(){return[]}},5062:function(t){t.exports=function(){return!1}},5778:function(n){"use strict";n.exports=t},4616:function(t){"use strict";t.exports=n},509:function(t,n,e){"use strict";var o=e(9985),r=e(3691),i=TypeError;t.exports=function(t){if(o(t))return t;throw new i(r(t)+" is not a function")}},2655:function(t,n,e){"use strict";var o=e(9429),r=e(3691),i=TypeError;t.exports=function(t){if(o(t))return t;throw new i(r(t)+" is not a constructor")}},3550:function(t,n,e){"use strict";var o=e(9985),r=String,i=TypeError;t.exports=function(t){if("object"==typeof t||o(t))return t;throw new i("Can't set "+r(t)+" as a prototype")}},7370:function(t,n,e){"use strict";var o=e(4201),r=e(5391),i=e(2560).f,a=o("unscopables"),s=Array.prototype;void 0===s[a]&&i(s,a,{configurable:!0,value:r(null)}),t.exports=function(t){s[a][t]=!0}},1514:function(t,n,e){"use strict";var o=e(730).charAt;t.exports=function(t,n,e){return n+(e?o(t,n).length:1)}},767:function(t,n,e){"use strict";var o=e(3622),r=TypeError;t.exports=function(t,n){if(o(n,t))return t;throw new r("Incorrect invocation")}},5027:function(t,n,e){"use strict";var o=e(8999),r=String,i=TypeError;t.exports=function(t){if(o(t))return t;throw new i(r(t)+" is not an object")}},4328:function(t,n,e){"use strict";var o=e(5290),r=e(7578),i=e(6310),a=function(t){return function(n,e,a){var s,c=o(n),u=i(c),l=r(a,u);if(t&&e!=e){for(;u>l;)if((s=c[l++])!=s)return!0}else for(;u>l;l++)if((t||l in c)&&c[l]===e)return t||l||0;return!t&&-1}};t.exports={includes:a(!0),indexOf:a(!1)}},6834:function(t,n,e){"use strict";var o=e(3689);t.exports=function(t,n){var e=[][t];return!!e&&o((function(){e.call(null,n||function(){return 1},1)}))}},8820:function(t,n,e){"use strict";var o=e(509),r=e(690),i=e(4413),a=e(6310),s=TypeError,c=function(t){return function(n,e,c,u){o(e);var l=r(n),f=i(l),p=a(l),d=t?p-1:0,h=t?-1:1;if(c<2)for(;;){if(d in f){u=f[d],d+=h;break}if(d+=h,t?d<0:p<=d)throw new s("Reduce of empty array with no initial value")}for(;t?d>=0:p>d;d+=h)d in f&&(u=e(u,f[d],d,l));return u}};t.exports={left:c(!1),right:c(!0)}},6004:function(t,n,e){"use strict";var o=e(8844);t.exports=o([].slice)},5271:function(t,n,e){"use strict";var o=e(2297),r=e(9429),i=e(8999),a=e(4201)("species"),s=Array;t.exports=function(t){var n;return o(t)&&(n=t.constructor,(r(n)&&(n===s||o(n.prototype))||i(n)&&null===(n=n[a]))&&(n=void 0)),void 0===n?s:n}},7120:function(t,n,e){"use strict";var o=e(5271);t.exports=function(t,n){return new(o(t))(0===n?0:n)}},6431:function(t,n,e){"use strict";var o=e(4201)("iterator"),r=!1;try{var i=0,a={next:function(){return{done:!!i++}},return:function(){r=!0}};a[o]=function(){return this},Array.from(a,(function(){throw 2}))}catch(t){}t.exports=function(t,n){try{if(!n&&!r)return!1}catch(t){return!1}var e=!1;try{var i={};i[o]=function(){return{next:function(){return{done:e=!0}}}},t(i)}catch(t){}return e}},6648:function(t,n,e){"use strict";var o=e(8844),r=o({}.toString),i=o("".slice);t.exports=function(t){return i(r(t),8,-1)}},926:function(t,n,e){"use strict";var o=e(3043),r=e(9985),i=e(6648),a=e(4201)("toStringTag"),s=Object,c="Arguments"===i(function(){return arguments}());t.exports=o?i:function(t){var n,e,o;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(e=function(t,n){try{return t[n]}catch(t){}}(n=s(t),a))?e:c?i(n):"Object"===(o=i(n))&&r(n.callee)?"Arguments":o}},8758:function(t,n,e){"use strict";var o=e(6812),r=e(9152),i=e(2474),a=e(2560);t.exports=function(t,n,e){for(var s=r(n),c=a.f,u=i.f,l=0;l<s.length;l++){var f=s[l];o(t,f)||e&&o(e,f)||c(t,f,u(n,f))}}},1748:function(t,n,e){"use strict";var o=e(3689);t.exports=!o((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}))},7807:function(t){"use strict";t.exports=function(t,n){return{value:t,done:n}}},5773:function(t,n,e){"use strict";var o=e(7697),r=e(2560),i=e(5684);t.exports=o?function(t,n,e){return r.f(t,n,i(1,e))}:function(t,n,e){return t[n]=e,t}},5684:function(t){"use strict";t.exports=function(t,n){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:n}}},2148:function(t,n,e){"use strict";var o=e(8702),r=e(2560);t.exports=function(t,n,e){return e.get&&o(e.get,n,{getter:!0}),e.set&&o(e.set,n,{setter:!0}),r.f(t,n,e)}},1880:function(t,n,e){"use strict";var o=e(9985),r=e(2560),i=e(8702),a=e(5014);t.exports=function(t,n,e,s){s||(s={});var c=s.enumerable,u=void 0!==s.name?s.name:n;if(o(e)&&i(e,u,s),s.global)c?t[n]=e:a(n,e);else{try{s.unsafe?t[n]&&(c=!0):delete t[n]}catch(t){}c?t[n]=e:r.f(t,n,{value:e,enumerable:!1,configurable:!s.nonConfigurable,writable:!s.nonWritable})}return t}},5014:function(t,n,e){"use strict";var o=e(9037),r=Object.defineProperty;t.exports=function(t,n){try{r(o,t,{value:n,configurable:!0,writable:!0})}catch(e){o[t]=n}return n}},7697:function(t,n,e){"use strict";var o=e(3689);t.exports=!o((function(){return 7!==Object.defineProperty({},1,{get:function(){return 7}})[1]}))},2659:function(t){"use strict";var n="object"==typeof document&&document.all,e=void 0===n&&void 0!==n;t.exports={all:n,IS_HTMLDDA:e}},6420:function(t,n,e){"use strict";var o=e(9037),r=e(8999),i=o.document,a=r(i)&&r(i.createElement);t.exports=function(t){return a?i.createElement(t):{}}},5565:function(t){"use strict";var n=TypeError;t.exports=function(t){if(t>9007199254740991)throw n("Maximum allowed index exceeded");return t}},6338:function(t){"use strict";t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},3265:function(t,n,e){"use strict";var o=e(6420)("span").classList,r=o&&o.constructor&&o.constructor.prototype;t.exports=r===Object.prototype?void 0:r},2532:function(t,n,e){"use strict";var o=e(8563),r=e(806);t.exports=!o&&!r&&"object"==typeof window&&"object"==typeof document},8563:function(t){"use strict";t.exports="object"==typeof Deno&&Deno&&"object"==typeof Deno.version},3221:function(t,n,e){"use strict";var o=e(71);t.exports=/ipad|iphone|ipod/i.test(o)&&"undefined"!=typeof Pebble},4764:function(t,n,e){"use strict";var o=e(71);t.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(o)},806:function(t,n,e){"use strict";var o=e(9037),r=e(6648);t.exports="process"===r(o.process)},7486:function(t,n,e){"use strict";var o=e(71);t.exports=/web0s(?!.*chrome)/i.test(o)},71:function(t){"use strict";t.exports="undefined"!=typeof navigator&&String(navigator.userAgent)||""},3615:function(t,n,e){"use strict";var o,r,i=e(9037),a=e(71),s=i.process,c=i.Deno,u=s&&s.versions||c&&c.version,l=u&&u.v8;l&&(r=(o=l.split("."))[0]>0&&o[0]<4?1:+(o[0]+o[1])),!r&&a&&(!(o=a.match(/Edge\/(\d+)/))||o[1]>=74)&&(o=a.match(/Chrome\/(\d+)/))&&(r=+o[1]),t.exports=r},2739:function(t){"use strict";t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},9989:function(t,n,e){"use strict";var o=e(9037),r=e(2474).f,i=e(5773),a=e(1880),s=e(5014),c=e(8758),u=e(5266);t.exports=function(t,n){var e,l,f,p,d,h=t.target,y=t.global,E=t.stat;if(e=y?o:E?o[h]||s(h,{}):(o[h]||{}).prototype)for(l in n){if(p=n[l],f=t.dontCallGetSet?(d=r(e,l))&&d.value:e[l],!u(y?l:h+(E?".":"#")+l,t.forced)&&void 0!==f){if(typeof p==typeof f)continue;c(p,f)}(t.sham||f&&f.sham)&&i(p,"sham",!0),a(e,l,p,t)}}},3689:function(t){"use strict";t.exports=function(t){try{return!!t()}catch(t){return!0}}},8678:function(t,n,e){"use strict";e(4043);var o=e(6576),r=e(1880),i=e(6308),a=e(3689),s=e(4201),c=e(5773),u=s("species"),l=RegExp.prototype;t.exports=function(t,n,e,f){var p=s(t),d=!a((function(){var n={};return n[p]=function(){return 7},7!==""[t](n)})),h=d&&!a((function(){var n=!1,e=/a/;return"split"===t&&((e={}).constructor={},e.constructor[u]=function(){return e},e.flags="",e[p]=/./[p]),e.exec=function(){return n=!0,null},e[p](""),!n}));if(!d||!h||e){var y=o(/./[p]),E=n(p,""[t],(function(t,n,e,r,a){var s=o(t),c=n.exec;return c===i||c===l.exec?d&&!a?{done:!0,value:y(n,e,r)}:{done:!0,value:s(e,n,r)}:{done:!1}}));r(String.prototype,t,E[0]),r(l,p,E[1])}f&&c(l[p],"sham",!0)}},7809:function(t,n,e){"use strict";var o=e(2297),r=e(6310),i=e(5565),a=e(4071),s=function(t,n,e,c,u,l,f,p){for(var d,h,y=u,E=0,g=!!f&&a(f,p);E<c;)E in e&&(d=g?g(e[E],E,n):e[E],l>0&&o(d)?(h=r(d),y=s(t,n,d,h,y,l-1)-1):(i(y+1),t[y]=d),y++),E++;return y};t.exports=s},1735:function(t,n,e){"use strict";var o=e(7215),r=Function.prototype,i=r.apply,a=r.call;t.exports="object"==typeof Reflect&&Reflect.apply||(o?a.bind(i):function(){return a.apply(i,arguments)})},4071:function(t,n,e){"use strict";var o=e(6576),r=e(509),i=e(7215),a=o(o.bind);t.exports=function(t,n){return r(t),void 0===n?t:i?a(t,n):function(){return t.apply(n,arguments)}}},7215:function(t,n,e){"use strict";var o=e(3689);t.exports=!o((function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")}))},2615:function(t,n,e){"use strict";var o=e(7215),r=Function.prototype.call;t.exports=o?r.bind(r):function(){return r.apply(r,arguments)}},1236:function(t,n,e){"use strict";var o=e(7697),r=e(6812),i=Function.prototype,a=o&&Object.getOwnPropertyDescriptor,s=r(i,"name"),c=s&&"something"===function(){}.name,u=s&&(!o||o&&a(i,"name").configurable);t.exports={EXISTS:s,PROPER:c,CONFIGURABLE:u}},2743:function(t,n,e){"use strict";var o=e(8844),r=e(509);t.exports=function(t,n,e){try{return o(r(Object.getOwnPropertyDescriptor(t,n)[e]))}catch(t){}}},6576:function(t,n,e){"use strict";var o=e(6648),r=e(8844);t.exports=function(t){if("Function"===o(t))return r(t)}},8844:function(t,n,e){"use strict";var o=e(7215),r=Function.prototype,i=r.call,a=o&&r.bind.bind(i,i);t.exports=o?a:function(t){return function(){return i.apply(t,arguments)}}},6058:function(t,n,e){"use strict";var o=e(9037),r=e(9985);t.exports=function(t,n){return arguments.length<2?(e=o[t],r(e)?e:void 0):o[t]&&o[t][n];var e}},1664:function(t,n,e){"use strict";var o=e(926),r=e(4849),i=e(981),a=e(9478),s=e(4201)("iterator");t.exports=function(t){if(!i(t))return r(t,s)||r(t,"@@iterator")||a[o(t)]}},5185:function(t,n,e){"use strict";var o=e(2615),r=e(509),i=e(5027),a=e(3691),s=e(1664),c=TypeError;t.exports=function(t,n){var e=arguments.length<2?s(t):n;if(r(e))return i(o(e,t));throw new c(a(t)+" is not iterable")}},4849:function(t,n,e){"use strict";var o=e(509),r=e(981);t.exports=function(t,n){var e=t[n];return r(e)?void 0:o(e)}},7017:function(t,n,e){"use strict";var o=e(8844),r=e(690),i=Math.floor,a=o("".charAt),s=o("".replace),c=o("".slice),u=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,l=/\$([$&'`]|\d{1,2})/g;t.exports=function(t,n,e,o,f,p){var d=e+t.length,h=o.length,y=l;return void 0!==f&&(f=r(f),y=u),s(p,y,(function(r,s){var u;switch(a(s,0)){case"$":return"$";case"&":return t;case"`":return c(n,0,e);case"'":return c(n,d);case"<":u=f[c(s,1,-1)];break;default:var l=+s;if(0===l)return r;if(l>h){var p=i(l/10);return 0===p?r:p<=h?void 0===o[p-1]?a(s,1):o[p-1]+a(s,1):r}u=o[l-1]}return void 0===u?"":u}))}},9037:function(t,n,e){"use strict";var o=function(t){return t&&t.Math===Math&&t};t.exports=o("object"==typeof globalThis&&globalThis)||o("object"==typeof window&&window)||o("object"==typeof self&&self)||o("object"==typeof e.g&&e.g)||function(){return this}()||this||Function("return this")()},6812:function(t,n,e){"use strict";var o=e(8844),r=e(690),i=o({}.hasOwnProperty);t.exports=Object.hasOwn||function(t,n){return i(r(t),n)}},7248:function(t){"use strict";t.exports={}},920:function(t){"use strict";t.exports=function(t,n){try{1===arguments.length?console.error(t):console.error(t,n)}catch(t){}}},2688:function(t,n,e){"use strict";var o=e(6058);t.exports=o("document","documentElement")},8506:function(t,n,e){"use strict";var o=e(7697),r=e(3689),i=e(6420);t.exports=!o&&!r((function(){return 7!==Object.defineProperty(i("div"),"a",{get:function(){return 7}}).a}))},4413:function(t,n,e){"use strict";var o=e(8844),r=e(3689),i=e(6648),a=Object,s=o("".split);t.exports=r((function(){return!a("z").propertyIsEnumerable(0)}))?function(t){return"String"===i(t)?s(t,""):a(t)}:a},6738:function(t,n,e){"use strict";var o=e(8844),r=e(9985),i=e(4091),a=o(Function.toString);r(i.inspectSource)||(i.inspectSource=function(t){return a(t)}),t.exports=i.inspectSource},618:function(t,n,e){"use strict";var o,r,i,a=e(9834),s=e(9037),c=e(8999),u=e(5773),l=e(6812),f=e(4091),p=e(2713),d=e(7248),h="Object already initialized",y=s.TypeError,E=s.WeakMap;if(a||f.state){var g=f.state||(f.state=new E);g.get=g.get,g.has=g.has,g.set=g.set,o=function(t,n){if(g.has(t))throw new y(h);return n.facade=t,g.set(t,n),n},r=function(t){return g.get(t)||{}},i=function(t){return g.has(t)}}else{var v=p("state");d[v]=!0,o=function(t,n){if(l(t,v))throw new y(h);return n.facade=t,u(t,v,n),n},r=function(t){return l(t,v)?t[v]:{}},i=function(t){return l(t,v)}}t.exports={set:o,get:r,has:i,enforce:function(t){return i(t)?r(t):o(t,{})},getterFor:function(t){return function(n){var e;if(!c(n)||(e=r(n)).type!==t)throw new y("Incompatible receiver, "+t+" required");return e}}}},3292:function(t,n,e){"use strict";var o=e(4201),r=e(9478),i=o("iterator"),a=Array.prototype;t.exports=function(t){return void 0!==t&&(r.Array===t||a[i]===t)}},2297:function(t,n,e){"use strict";var o=e(6648);t.exports=Array.isArray||function(t){return"Array"===o(t)}},9985:function(t,n,e){"use strict";var o=e(2659),r=o.all;t.exports=o.IS_HTMLDDA?function(t){return"function"==typeof t||t===r}:function(t){return"function"==typeof t}},9429:function(t,n,e){"use strict";var o=e(8844),r=e(3689),i=e(9985),a=e(926),s=e(6058),c=e(6738),u=function(){},l=[],f=s("Reflect","construct"),p=/^\s*(?:class|function)\b/,d=o(p.exec),h=!p.test(u),y=function(t){if(!i(t))return!1;try{return f(u,l,t),!0}catch(t){return!1}},E=function(t){if(!i(t))return!1;switch(a(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return h||!!d(p,c(t))}catch(t){return!0}};E.sham=!0,t.exports=!f||r((function(){var t;return y(y.call)||!y(Object)||!y((function(){t=!0}))||t}))?E:y},5266:function(t,n,e){"use strict";var o=e(3689),r=e(9985),i=/#|\.prototype\./,a=function(t,n){var e=c[s(t)];return e===l||e!==u&&(r(n)?o(n):!!n)},s=a.normalize=function(t){return String(t).replace(i,".").toLowerCase()},c=a.data={},u=a.NATIVE="N",l=a.POLYFILL="P";t.exports=a},981:function(t){"use strict";t.exports=function(t){return null==t}},8999:function(t,n,e){"use strict";var o=e(9985),r=e(2659),i=r.all;t.exports=r.IS_HTMLDDA?function(t){return"object"==typeof t?null!==t:o(t)||t===i}:function(t){return"object"==typeof t?null!==t:o(t)}},3931:function(t){"use strict";t.exports=!1},734:function(t,n,e){"use strict";var o=e(6058),r=e(9985),i=e(3622),a=e(9525),s=Object;t.exports=a?function(t){return"symbol"==typeof t}:function(t){var n=o("Symbol");return r(n)&&i(n.prototype,s(t))}},8734:function(t,n,e){"use strict";var o=e(4071),r=e(2615),i=e(5027),a=e(3691),s=e(3292),c=e(6310),u=e(3622),l=e(5185),f=e(1664),p=e(2125),d=TypeError,h=function(t,n){this.stopped=t,this.result=n},y=h.prototype;t.exports=function(t,n,e){var E,g,v,T,m,S,A,O=e&&e.that,b=!(!e||!e.AS_ENTRIES),R=!(!e||!e.IS_RECORD),w=!(!e||!e.IS_ITERATOR),N=!(!e||!e.INTERRUPTED),I=o(n,O),x=function(t){return E&&p(E,"normal",t),new h(!0,t)},C=function(t){return b?(i(t),N?I(t[0],t[1],x):I(t[0],t[1])):N?I(t,x):I(t)};if(R)E=t.iterator;else if(w)E=t;else{if(!(g=f(t)))throw new d(a(t)+" is not iterable");if(s(g)){for(v=0,T=c(t);T>v;v++)if((m=C(t[v]))&&u(y,m))return m;return new h(!1)}E=l(t,g)}for(S=R?t.next:E.next;!(A=r(S,E)).done;){try{m=C(A.value)}catch(t){p(E,"throw",t)}if("object"==typeof m&&m&&u(y,m))return m}return new h(!1)}},2125:function(t,n,e){"use strict";var o=e(2615),r=e(5027),i=e(4849);t.exports=function(t,n,e){var a,s;r(t);try{if(!(a=i(t,"return"))){if("throw"===n)throw e;return e}a=o(a,t)}catch(t){s=!0,a=t}if("throw"===n)throw e;if(s)throw a;return r(a),e}},974:function(t,n,e){"use strict";var o=e(2013).IteratorPrototype,r=e(5391),i=e(5684),a=e(5997),s=e(9478),c=function(){return this};t.exports=function(t,n,e,u){var l=n+" Iterator";return t.prototype=r(o,{next:i(+!u,e)}),a(t,l,!1,!0),s[l]=c,t}},1934:function(t,n,e){"use strict";var o=e(9989),r=e(2615),i=e(3931),a=e(1236),s=e(9985),c=e(974),u=e(1868),l=e(9385),f=e(5997),p=e(5773),d=e(1880),h=e(4201),y=e(9478),E=e(2013),g=a.PROPER,v=a.CONFIGURABLE,T=E.IteratorPrototype,m=E.BUGGY_SAFARI_ITERATORS,S=h("iterator"),A="keys",O="values",b="entries",R=function(){return this};t.exports=function(t,n,e,a,h,E,w){c(e,n,a);var N,I,x,C=function(t){if(t===h&&j)return j;if(!m&&t&&t in L)return L[t];switch(t){case A:case O:case b:return function(){return new e(this,t)}}return function(){return new e(this)}},_=n+" Iterator",P=!1,L=t.prototype,D=L[S]||L["@@iterator"]||h&&L[h],j=!m&&D||C(h),k="Array"===n&&L.entries||D;if(k&&(N=u(k.call(new t)))!==Object.prototype&&N.next&&(i||u(N)===T||(l?l(N,T):s(N[S])||d(N,S,R)),f(N,_,!0,!0),i&&(y[_]=R)),g&&h===O&&D&&D.name!==O&&(!i&&v?p(L,"name",O):(P=!0,j=function(){return r(D,this)})),h)if(I={values:C(O),keys:E?j:C(A),entries:C(b)},w)for(x in I)(m||P||!(x in L))&&d(L,x,I[x]);else o({target:n,proto:!0,forced:m||P},I);return i&&!w||L[S]===j||d(L,S,j,{name:h}),y[n]=j,I}},2013:function(t,n,e){"use strict";var o,r,i,a=e(3689),s=e(9985),c=e(8999),u=e(5391),l=e(1868),f=e(1880),p=e(4201),d=e(3931),h=p("iterator"),y=!1;[].keys&&("next"in(i=[].keys())?(r=l(l(i)))!==Object.prototype&&(o=r):y=!0),!c(o)||a((function(){var t={};return o[h].call(t)!==t}))?o={}:d&&(o=u(o)),s(o[h])||f(o,h,(function(){return this})),t.exports={IteratorPrototype:o,BUGGY_SAFARI_ITERATORS:y}},9478:function(t){"use strict";t.exports={}},6310:function(t,n,e){"use strict";var o=e(3126);t.exports=function(t){return o(t.length)}},8702:function(t,n,e){"use strict";var o=e(8844),r=e(3689),i=e(9985),a=e(6812),s=e(7697),c=e(1236).CONFIGURABLE,u=e(6738),l=e(618),f=l.enforce,p=l.get,d=String,h=Object.defineProperty,y=o("".slice),E=o("".replace),g=o([].join),v=s&&!r((function(){return 8!==h((function(){}),"length",{value:8}).length})),T=String(String).split("String"),m=t.exports=function(t,n,e){"Symbol("===y(d(n),0,7)&&(n="["+E(d(n),/^Symbol\(([^)]*)\)/,"$1")+"]"),e&&e.getter&&(n="get "+n),e&&e.setter&&(n="set "+n),(!a(t,"name")||c&&t.name!==n)&&(s?h(t,"name",{value:n,configurable:!0}):t.name=n),v&&e&&a(e,"arity")&&t.length!==e.arity&&h(t,"length",{value:e.arity});try{e&&a(e,"constructor")&&e.constructor?s&&h(t,"prototype",{writable:!1}):t.prototype&&(t.prototype=void 0)}catch(t){}var o=f(t);return a(o,"source")||(o.source=g(T,"string"==typeof n?n:"")),t};Function.prototype.toString=m((function(){return i(this)&&p(this).source||u(this)}),"toString")},8828:function(t){"use strict";var n=Math.ceil,e=Math.floor;t.exports=Math.trunc||function(t){var o=+t;return(o>0?e:n)(o)}},231:function(t,n,e){"use strict";var o,r,i,a,s,c=e(9037),u=e(4071),l=e(2474).f,f=e(9886).set,p=e(4410),d=e(4764),h=e(3221),y=e(7486),E=e(806),g=c.MutationObserver||c.WebKitMutationObserver,v=c.document,T=c.process,m=c.Promise,S=l(c,"queueMicrotask"),A=S&&S.value;if(!A){var O=new p,b=function(){var t,n;for(E&&(t=T.domain)&&t.exit();n=O.get();)try{n()}catch(t){throw O.head&&o(),t}t&&t.enter()};d||E||y||!g||!v?!h&&m&&m.resolve?((a=m.resolve(void 0)).constructor=m,s=u(a.then,a),o=function(){s(b)}):E?o=function(){T.nextTick(b)}:(f=u(f,c),o=function(){f(b)}):(r=!0,i=v.createTextNode(""),new g(b).observe(i,{characterData:!0}),o=function(){i.data=r=!r}),A=function(t){O.head||o(),O.add(t)}}t.exports=A},8742:function(t,n,e){"use strict";var o=e(509),r=TypeError,i=function(t){var n,e;this.promise=new t((function(t,o){if(void 0!==n||void 0!==e)throw new r("Bad Promise constructor");n=t,e=o})),this.resolve=o(n),this.reject=o(e)};t.exports.f=function(t){return new i(t)}},5391:function(t,n,e){"use strict";var o,r=e(5027),i=e(8920),a=e(2739),s=e(7248),c=e(2688),u=e(6420),l=e(2713),f="prototype",p="script",d=l("IE_PROTO"),h=function(){},y=function(t){return"<"+p+">"+t+"</"+p+">"},E=function(t){t.write(y("")),t.close();var n=t.parentWindow.Object;return t=null,n},g=function(){try{o=new ActiveXObject("htmlfile")}catch(t){}var t,n,e;g="undefined"!=typeof document?document.domain&&o?E(o):(n=u("iframe"),e="java"+p+":",n.style.display="none",c.appendChild(n),n.src=String(e),(t=n.contentWindow.document).open(),t.write(y("document.F=Object")),t.close(),t.F):E(o);for(var r=a.length;r--;)delete g[f][a[r]];return g()};s[d]=!0,t.exports=Object.create||function(t,n){var e;return null!==t?(h[f]=r(t),e=new h,h[f]=null,e[d]=t):e=g(),void 0===n?e:i.f(e,n)}},8920:function(t,n,e){"use strict";var o=e(7697),r=e(5648),i=e(2560),a=e(5027),s=e(5290),c=e(300);n.f=o&&!r?Object.defineProperties:function(t,n){a(t);for(var e,o=s(n),r=c(n),u=r.length,l=0;u>l;)i.f(t,e=r[l++],o[e]);return t}},2560:function(t,n,e){"use strict";var o=e(7697),r=e(8506),i=e(5648),a=e(5027),s=e(8360),c=TypeError,u=Object.defineProperty,l=Object.getOwnPropertyDescriptor,f="enumerable",p="configurable",d="writable";n.f=o?i?function(t,n,e){if(a(t),n=s(n),a(e),"function"==typeof t&&"prototype"===n&&"value"in e&&d in e&&!e[d]){var o=l(t,n);o&&o[d]&&(t[n]=e.value,e={configurable:p in e?e[p]:o[p],enumerable:f in e?e[f]:o[f],writable:!1})}return u(t,n,e)}:u:function(t,n,e){if(a(t),n=s(n),a(e),r)try{return u(t,n,e)}catch(t){}if("get"in e||"set"in e)throw new c("Accessors not supported");return"value"in e&&(t[n]=e.value),t}},2474:function(t,n,e){"use strict";var o=e(7697),r=e(2615),i=e(9556),a=e(5684),s=e(5290),c=e(8360),u=e(6812),l=e(8506),f=Object.getOwnPropertyDescriptor;n.f=o?f:function(t,n){if(t=s(t),n=c(n),l)try{return f(t,n)}catch(t){}if(u(t,n))return a(!r(i.f,t,n),t[n])}},2741:function(t,n,e){"use strict";var o=e(4948),r=e(2739).concat("length","prototype");n.f=Object.getOwnPropertyNames||function(t){return o(t,r)}},7518:function(t,n){"use strict";n.f=Object.getOwnPropertySymbols},1868:function(t,n,e){"use strict";var o=e(6812),r=e(9985),i=e(690),a=e(2713),s=e(1748),c=a("IE_PROTO"),u=Object,l=u.prototype;t.exports=s?u.getPrototypeOf:function(t){var n=i(t);if(o(n,c))return n[c];var e=n.constructor;return r(e)&&n instanceof e?e.prototype:n instanceof u?l:null}},3622:function(t,n,e){"use strict";var o=e(8844);t.exports=o({}.isPrototypeOf)},4948:function(t,n,e){"use strict";var o=e(8844),r=e(6812),i=e(5290),a=e(4328).indexOf,s=e(7248),c=o([].push);t.exports=function(t,n){var e,o=i(t),u=0,l=[];for(e in o)!r(s,e)&&r(o,e)&&c(l,e);for(;n.length>u;)r(o,e=n[u++])&&(~a(l,e)||c(l,e));return l}},300:function(t,n,e){"use strict";var o=e(4948),r=e(2739);t.exports=Object.keys||function(t){return o(t,r)}},9556:function(t,n){"use strict";var e={}.propertyIsEnumerable,o=Object.getOwnPropertyDescriptor,r=o&&!e.call({1:2},1);n.f=r?function(t){var n=o(this,t);return!!n&&n.enumerable}:e},9385:function(t,n,e){"use strict";var o=e(2743),r=e(5027),i=e(3550);t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,n=!1,e={};try{(t=o(Object.prototype,"__proto__","set"))(e,[]),n=e instanceof Array}catch(t){}return function(e,o){return r(e),i(o),n?t(e,o):e.__proto__=o,e}}():void 0)},5899:function(t,n,e){"use strict";var o=e(2615),r=e(9985),i=e(8999),a=TypeError;t.exports=function(t,n){var e,s;if("string"===n&&r(e=t.toString)&&!i(s=o(e,t)))return s;if(r(e=t.valueOf)&&!i(s=o(e,t)))return s;if("string"!==n&&r(e=t.toString)&&!i(s=o(e,t)))return s;throw new a("Can't convert object to primitive value")}},9152:function(t,n,e){"use strict";var o=e(6058),r=e(8844),i=e(2741),a=e(7518),s=e(5027),c=r([].concat);t.exports=o("Reflect","ownKeys")||function(t){var n=i.f(s(t)),e=a.f;return e?c(n,e(t)):n}},9302:function(t){"use strict";t.exports=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}}},7073:function(t,n,e){"use strict";var o=e(9037),r=e(7919),i=e(9985),a=e(5266),s=e(6738),c=e(4201),u=e(2532),l=e(8563),f=e(3931),p=e(3615),d=r&&r.prototype,h=c("species"),y=!1,E=i(o.PromiseRejectionEvent),g=a("Promise",(function(){var t=s(r),n=t!==String(r);if(!n&&66===p)return!0;if(f&&(!d.catch||!d.finally))return!0;if(!p||p<51||!/native code/.test(t)){var e=new r((function(t){t(1)})),o=function(t){t((function(){}),(function(){}))};if((e.constructor={})[h]=o,!(y=e.then((function(){}))instanceof o))return!0}return!n&&(u||l)&&!E}));t.exports={CONSTRUCTOR:g,REJECTION_EVENT:E,SUBCLASSING:y}},7919:function(t,n,e){"use strict";var o=e(9037);t.exports=o.Promise},2945:function(t,n,e){"use strict";var o=e(5027),r=e(8999),i=e(8742);t.exports=function(t,n){if(o(t),r(n)&&n.constructor===t)return n;var e=i.f(t);return(0,e.resolve)(n),e.promise}},562:function(t,n,e){"use strict";var o=e(7919),r=e(6431),i=e(7073).CONSTRUCTOR;t.exports=i||!r((function(t){o.all(t).then(void 0,(function(){}))}))},4410:function(t){"use strict";var n=function(){this.head=null,this.tail=null};n.prototype={add:function(t){var n={item:t,next:null},e=this.tail;e?e.next=n:this.head=n,this.tail=n},get:function(){var t=this.head;if(t)return null===(this.head=t.next)&&(this.tail=null),t.item}},t.exports=n},6100:function(t,n,e){"use strict";var o=e(2615),r=e(5027),i=e(9985),a=e(6648),s=e(6308),c=TypeError;t.exports=function(t,n){var e=t.exec;if(i(e)){var u=o(e,t,n);return null!==u&&r(u),u}if("RegExp"===a(t))return o(s,t,n);throw new c("RegExp#exec called on incompatible receiver")}},6308:function(t,n,e){"use strict";var o,r,i=e(2615),a=e(8844),s=e(4327),c=e(9633),u=e(7901),l=e(3430),f=e(5391),p=e(618).get,d=e(2100),h=e(6422),y=l("native-string-replace",String.prototype.replace),E=RegExp.prototype.exec,g=E,v=a("".charAt),T=a("".indexOf),m=a("".replace),S=a("".slice),A=(r=/b*/g,i(E,o=/a/,"a"),i(E,r,"a"),0!==o.lastIndex||0!==r.lastIndex),O=u.BROKEN_CARET,b=void 0!==/()??/.exec("")[1];(A||b||O||d||h)&&(g=function(t){var n,e,o,r,a,u,l,d=this,h=p(d),R=s(t),w=h.raw;if(w)return w.lastIndex=d.lastIndex,n=i(g,w,R),d.lastIndex=w.lastIndex,n;var N=h.groups,I=O&&d.sticky,x=i(c,d),C=d.source,_=0,P=R;if(I&&(x=m(x,"y",""),-1===T(x,"g")&&(x+="g"),P=S(R,d.lastIndex),d.lastIndex>0&&(!d.multiline||d.multiline&&"\n"!==v(R,d.lastIndex-1))&&(C="(?: "+C+")",P=" "+P,_++),e=new RegExp("^(?:"+C+")",x)),b&&(e=new RegExp("^"+C+"$(?!\\s)",x)),A&&(o=d.lastIndex),r=i(E,I?e:d,P),I?r?(r.input=S(r.input,_),r[0]=S(r[0],_),r.index=d.lastIndex,d.lastIndex+=r[0].length):d.lastIndex=0:A&&r&&(d.lastIndex=d.global?r.index+r[0].length:o),b&&r&&r.length>1&&i(y,r[0],e,(function(){for(a=1;a<arguments.length-2;a++)void 0===arguments[a]&&(r[a]=void 0)})),r&&N)for(r.groups=u=f(null),a=0;a<N.length;a++)u[(l=N[a])[0]]=r[l[1]];return r}),t.exports=g},9633:function(t,n,e){"use strict";var o=e(5027);t.exports=function(){var t=o(this),n="";return t.hasIndices&&(n+="d"),t.global&&(n+="g"),t.ignoreCase&&(n+="i"),t.multiline&&(n+="m"),t.dotAll&&(n+="s"),t.unicode&&(n+="u"),t.unicodeSets&&(n+="v"),t.sticky&&(n+="y"),n}},7901:function(t,n,e){"use strict";var o=e(3689),r=e(9037).RegExp,i=o((function(){var t=r("a","y");return t.lastIndex=2,null!==t.exec("abcd")})),a=i||o((function(){return!r("a","y").sticky})),s=i||o((function(){var t=r("^r","gy");return t.lastIndex=2,null!==t.exec("str")}));t.exports={BROKEN_CARET:s,MISSED_STICKY:a,UNSUPPORTED_Y:i}},2100:function(t,n,e){"use strict";var o=e(3689),r=e(9037).RegExp;t.exports=o((function(){var t=r(".","s");return!(t.dotAll&&t.test("\n")&&"s"===t.flags)}))},6422:function(t,n,e){"use strict";var o=e(3689),r=e(9037).RegExp;t.exports=o((function(){var t=r("(?<a>b)","g");return"b"!==t.exec("b").groups.a||"bc"!=="b".replace(t,"$<a>c")}))},4684:function(t,n,e){"use strict";var o=e(981),r=TypeError;t.exports=function(t){if(o(t))throw new r("Can't call method on "+t);return t}},4241:function(t,n,e){"use strict";var o=e(6058),r=e(2148),i=e(4201),a=e(7697),s=i("species");t.exports=function(t){var n=o(t);a&&n&&!n[s]&&r(n,s,{configurable:!0,get:function(){return this}})}},5997:function(t,n,e){"use strict";var o=e(2560).f,r=e(6812),i=e(4201)("toStringTag");t.exports=function(t,n,e){t&&!e&&(t=t.prototype),t&&!r(t,i)&&o(t,i,{configurable:!0,value:n})}},2713:function(t,n,e){"use strict";var o=e(3430),r=e(4630),i=o("keys");t.exports=function(t){return i[t]||(i[t]=r(t))}},4091:function(t,n,e){"use strict";var o=e(9037),r=e(5014),i="__core-js_shared__",a=o[i]||r(i,{});t.exports=a},3430:function(t,n,e){"use strict";var o=e(3931),r=e(4091);(t.exports=function(t,n){return r[t]||(r[t]=void 0!==n?n:{})})("versions",[]).push({version:"3.33.2",mode:o?"pure":"global",copyright:"Â© 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.33.2/LICENSE",source:"https://github.com/zloirock/core-js"})},6373:function(t,n,e){"use strict";var o=e(5027),r=e(2655),i=e(981),a=e(4201)("species");t.exports=function(t,n){var e,s=o(t).constructor;return void 0===s||i(e=o(s)[a])?n:r(e)}},730:function(t,n,e){"use strict";var o=e(8844),r=e(8700),i=e(4327),a=e(4684),s=o("".charAt),c=o("".charCodeAt),u=o("".slice),l=function(t){return function(n,e){var o,l,f=i(a(n)),p=r(e),d=f.length;return p<0||p>=d?t?"":void 0:(o=c(f,p))<55296||o>56319||p+1===d||(l=c(f,p+1))<56320||l>57343?t?s(f,p):o:t?u(f,p,p+2):l-56320+(o-55296<<10)+65536}};t.exports={codeAt:l(!1),charAt:l(!0)}},146:function(t,n,e){"use strict";var o=e(3615),r=e(3689),i=e(9037).String;t.exports=!!Object.getOwnPropertySymbols&&!r((function(){var t=Symbol("symbol detection");return!i(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&o&&o<41}))},9886:function(t,n,e){"use strict";var o,r,i,a,s=e(9037),c=e(1735),u=e(4071),l=e(9985),f=e(6812),p=e(3689),d=e(2688),h=e(6004),y=e(6420),E=e(1500),g=e(4764),v=e(806),T=s.setImmediate,m=s.clearImmediate,S=s.process,A=s.Dispatch,O=s.Function,b=s.MessageChannel,R=s.String,w=0,N={},I="onreadystatechange";p((function(){o=s.location}));var x=function(t){if(f(N,t)){var n=N[t];delete N[t],n()}},C=function(t){return function(){x(t)}},_=function(t){x(t.data)},P=function(t){s.postMessage(R(t),o.protocol+"//"+o.host)};T&&m||(T=function(t){E(arguments.length,1);var n=l(t)?t:O(t),e=h(arguments,1);return N[++w]=function(){c(n,void 0,e)},r(w),w},m=function(t){delete N[t]},v?r=function(t){S.nextTick(C(t))}:A&&A.now?r=function(t){A.now(C(t))}:b&&!g?(a=(i=new b).port2,i.port1.onmessage=_,r=u(a.postMessage,a)):s.addEventListener&&l(s.postMessage)&&!s.importScripts&&o&&"file:"!==o.protocol&&!p(P)?(r=P,s.addEventListener("message",_,!1)):r=I in y("script")?function(t){d.appendChild(y("script"))[I]=function(){d.removeChild(this),x(t)}}:function(t){setTimeout(C(t),0)}),t.exports={set:T,clear:m}},7578:function(t,n,e){"use strict";var o=e(8700),r=Math.max,i=Math.min;t.exports=function(t,n){var e=o(t);return e<0?r(e+n,0):i(e,n)}},5290:function(t,n,e){"use strict";var o=e(4413),r=e(4684);t.exports=function(t){return o(r(t))}},8700:function(t,n,e){"use strict";var o=e(8828);t.exports=function(t){var n=+t;return n!=n||0===n?0:o(n)}},3126:function(t,n,e){"use strict";var o=e(8700),r=Math.min;t.exports=function(t){return t>0?r(o(t),9007199254740991):0}},690:function(t,n,e){"use strict";var o=e(4684),r=Object;t.exports=function(t){return r(o(t))}},8732:function(t,n,e){"use strict";var o=e(2615),r=e(8999),i=e(734),a=e(4849),s=e(5899),c=e(4201),u=TypeError,l=c("toPrimitive");t.exports=function(t,n){if(!r(t)||i(t))return t;var e,c=a(t,l);if(c){if(void 0===n&&(n="default"),e=o(c,t,n),!r(e)||i(e))return e;throw new u("Can't convert object to primitive value")}return void 0===n&&(n="number"),s(t,n)}},8360:function(t,n,e){"use strict";var o=e(8732),r=e(734);t.exports=function(t){var n=o(t,"string");return r(n)?n:n+""}},3043:function(t,n,e){"use strict";var o={};o[e(4201)("toStringTag")]="z",t.exports="[object z]"===String(o)},4327:function(t,n,e){"use strict";var o=e(926),r=String;t.exports=function(t){if("Symbol"===o(t))throw new TypeError("Cannot convert a Symbol value to a string");return r(t)}},3691:function(t){"use strict";var n=String;t.exports=function(t){try{return n(t)}catch(t){return"Object"}}},4630:function(t,n,e){"use strict";var o=e(8844),r=0,i=Math.random(),a=o(1..toString);t.exports=function(t){return"Symbol("+(void 0===t?"":t)+")_"+a(++r+i,36)}},9525:function(t,n,e){"use strict";var o=e(146);t.exports=o&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},5648:function(t,n,e){"use strict";var o=e(7697),r=e(3689);t.exports=o&&r((function(){return 42!==Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},1500:function(t){"use strict";var n=TypeError;t.exports=function(t,e){if(t<e)throw new n("Not enough arguments");return t}},9834:function(t,n,e){"use strict";var o=e(9037),r=e(9985),i=o.WeakMap;t.exports=r(i)&&/native code/.test(String(i))},4201:function(t,n,e){"use strict";var o=e(9037),r=e(3430),i=e(6812),a=e(4630),s=e(146),c=e(9525),u=o.Symbol,l=r("wks"),f=c?u.for||u:u&&u.withoutSetter||a;t.exports=function(t){return i(l,t)||(l[t]=s&&i(u,t)?u[t]:f("Symbol."+t)),l[t]}},2795:function(t,n,e){"use strict";var o=e(9989),r=e(7809),i=e(690),a=e(6310),s=e(8700),c=e(7120);o({target:"Array",proto:!0},{flat:function(){var t=arguments.length?arguments[0]:void 0,n=i(this),e=a(n),o=c(n,0);return o.length=r(o,n,n,e,0,void 0===t?1:s(t)),o}})},752:function(t,n,e){"use strict";var o=e(5290),r=e(7370),i=e(9478),a=e(618),s=e(2560).f,c=e(1934),u=e(7807),l=e(3931),f=e(7697),p="Array Iterator",d=a.set,h=a.getterFor(p);t.exports=c(Array,"Array",(function(t,n){d(this,{type:p,target:o(t),index:0,kind:n})}),(function(){var t=h(this),n=t.target,e=t.index++;if(!n||e>=n.length)return t.target=void 0,u(void 0,!0);switch(t.kind){case"keys":return u(e,!1);case"values":return u(n[e],!1)}return u([e,n[e]],!1)}),"values");var y=i.Arguments=i.Array;if(r("keys"),r("values"),r("entries"),!l&&f&&"values"!==y.name)try{s(y,"name",{value:"values"})}catch(t){}},278:function(t,n,e){"use strict";var o=e(9989),r=e(8820).left,i=e(6834),a=e(3615);o({target:"Array",proto:!0,forced:!e(806)&&a>79&&a<83||!i("reduce")},{reduce:function(t){var n=arguments.length;return r(this,t,n,n>1?arguments[1]:void 0)}})},3383:function(t,n,e){"use strict";e(7370)("flat")},1692:function(t,n,e){"use strict";var o=e(9989),r=e(2615),i=e(509),a=e(8742),s=e(9302),c=e(8734);o({target:"Promise",stat:!0,forced:e(562)},{all:function(t){var n=this,e=a.f(n),o=e.resolve,u=e.reject,l=s((function(){var e=i(n.resolve),a=[],s=0,l=1;c(t,(function(t){var i=s++,c=!1;l++,r(e,n,t).then((function(t){c||(c=!0,a[i]=t,--l||o(a))}),u)})),--l||o(a)}));return l.error&&u(l.value),e.promise}})},5089:function(t,n,e){"use strict";var o=e(9989),r=e(3931),i=e(7073).CONSTRUCTOR,a=e(7919),s=e(6058),c=e(9985),u=e(1880),l=a&&a.prototype;if(o({target:"Promise",proto:!0,forced:i,real:!0},{catch:function(t){return this.then(void 0,t)}}),!r&&c(a)){var f=s("Promise").prototype.catch;l.catch!==f&&u(l,"catch",f,{unsafe:!0})}},6697:function(t,n,e){"use strict";var o,r,i,a=e(9989),s=e(3931),c=e(806),u=e(9037),l=e(2615),f=e(1880),p=e(9385),d=e(5997),h=e(4241),y=e(509),E=e(9985),g=e(8999),v=e(767),T=e(6373),m=e(9886).set,S=e(231),A=e(920),O=e(9302),b=e(4410),R=e(618),w=e(7919),N=e(7073),I=e(8742),x="Promise",C=N.CONSTRUCTOR,_=N.REJECTION_EVENT,P=N.SUBCLASSING,L=R.getterFor(x),D=R.set,j=w&&w.prototype,k=w,M=j,U=u.TypeError,V=u.document,F=u.process,B=I.f,G=B,H=!!(V&&V.createEvent&&u.dispatchEvent),Y="unhandledrejection",W=function(t){var n;return!(!g(t)||!E(n=t.then))&&n},K=function(t,n){var e,o,r,i=n.value,a=1===n.state,s=a?t.ok:t.fail,c=t.resolve,u=t.reject,f=t.domain;try{s?(a||(2===n.rejection&&J(n),n.rejection=1),!0===s?e=i:(f&&f.enter(),e=s(i),f&&(f.exit(),r=!0)),e===t.promise?u(new U("Promise-chain cycle")):(o=W(e))?l(o,e,c,u):c(e)):u(i)}catch(t){f&&!r&&f.exit(),u(t)}},z=function(t,n){t.notified||(t.notified=!0,S((function(){for(var e,o=t.reactions;e=o.get();)K(e,t);t.notified=!1,n&&!t.rejection&&$(t)})))},X=function(t,n,e){var o,r;H?((o=V.createEvent("Event")).promise=n,o.reason=e,o.initEvent(t,!1,!0),u.dispatchEvent(o)):o={promise:n,reason:e},!_&&(r=u["on"+t])?r(o):t===Y&&A("Unhandled promise rejection",e)},$=function(t){l(m,u,(function(){var n,e=t.facade,o=t.value;if(q(t)&&(n=O((function(){c?F.emit("unhandledRejection",o,e):X(Y,e,o)})),t.rejection=c||q(t)?2:1,n.error))throw n.value}))},q=function(t){return 1!==t.rejection&&!t.parent},J=function(t){l(m,u,(function(){var n=t.facade;c?F.emit("rejectionHandled",n):X("rejectionhandled",n,t.value)}))},Q=function(t,n,e){return function(o){t(n,o,e)}},Z=function(t,n,e){t.done||(t.done=!0,e&&(t=e),t.value=n,t.state=2,z(t,!0))},tt=function(t,n,e){if(!t.done){t.done=!0,e&&(t=e);try{if(t.facade===n)throw new U("Promise can't be resolved itself");var o=W(n);o?S((function(){var e={done:!1};try{l(o,n,Q(tt,e,t),Q(Z,e,t))}catch(n){Z(e,n,t)}})):(t.value=n,t.state=1,z(t,!1))}catch(n){Z({done:!1},n,t)}}};if(C&&(M=(k=function(t){v(this,M),y(t),l(o,this);var n=L(this);try{t(Q(tt,n),Q(Z,n))}catch(t){Z(n,t)}}).prototype,(o=function(t){D(this,{type:x,done:!1,notified:!1,parent:!1,reactions:new b,rejection:!1,state:0,value:void 0})}).prototype=f(M,"then",(function(t,n){var e=L(this),o=B(T(this,k));return e.parent=!0,o.ok=!E(t)||t,o.fail=E(n)&&n,o.domain=c?F.domain:void 0,0===e.state?e.reactions.add(o):S((function(){K(o,e)})),o.promise})),r=function(){var t=new o,n=L(t);this.promise=t,this.resolve=Q(tt,n),this.reject=Q(Z,n)},I.f=B=function(t){return t===k||undefined===t?new r(t):G(t)},!s&&E(w)&&j!==Object.prototype)){i=j.then,P||f(j,"then",(function(t,n){var e=this;return new k((function(t,n){l(i,e,t,n)})).then(t,n)}),{unsafe:!0});try{delete j.constructor}catch(t){}p&&p(j,M)}a({global:!0,constructor:!0,wrap:!0,forced:C},{Promise:k}),d(k,x,!1,!0),h(x)},6409:function(t,n,e){"use strict";var o=e(9989),r=e(3931),i=e(7919),a=e(3689),s=e(6058),c=e(9985),u=e(6373),l=e(2945),f=e(1880),p=i&&i.prototype;if(o({target:"Promise",proto:!0,real:!0,forced:!!i&&a((function(){p.finally.call({then:function(){}},(function(){}))}))},{finally:function(t){var n=u(this,s("Promise")),e=c(t);return this.then(e?function(e){return l(n,t()).then((function(){return e}))}:t,e?function(e){return l(n,t()).then((function(){throw e}))}:t)}}),!r&&c(i)){var d=s("Promise").prototype.finally;p.finally!==d&&f(p,"finally",d,{unsafe:!0})}},3964:function(t,n,e){"use strict";e(6697),e(1692),e(5089),e(8829),e(2092),e(7905)},8829:function(t,n,e){"use strict";var o=e(9989),r=e(2615),i=e(509),a=e(8742),s=e(9302),c=e(8734);o({target:"Promise",stat:!0,forced:e(562)},{race:function(t){var n=this,e=a.f(n),o=e.reject,u=s((function(){var a=i(n.resolve);c(t,(function(t){r(a,n,t).then(e.resolve,o)}))}));return u.error&&o(u.value),e.promise}})},2092:function(t,n,e){"use strict";var o=e(9989),r=e(2615),i=e(8742);o({target:"Promise",stat:!0,forced:e(7073).CONSTRUCTOR},{reject:function(t){var n=i.f(this);return r(n.reject,void 0,t),n.promise}})},7905:function(t,n,e){"use strict";var o=e(9989),r=e(6058),i=e(3931),a=e(7919),s=e(7073).CONSTRUCTOR,c=e(2945),u=r("Promise"),l=i&&!s;o({target:"Promise",stat:!0,forced:i||s},{resolve:function(t){return c(l&&this===u?a:this,t)}})},4043:function(t,n,e){"use strict";var o=e(9989),r=e(6308);o({target:"RegExp",proto:!0,forced:/./.exec!==r},{exec:r})},5847:function(t,n,e){"use strict";var o=e(9037),r=e(7697),i=e(2148),a=e(9633),s=e(3689),c=o.RegExp,u=c.prototype;r&&s((function(){var t=!0;try{c(".","d")}catch(n){t=!1}var n={},e="",o=t?"dgimsy":"gimsy",r=function(t,o){Object.defineProperty(n,t,{get:function(){return e+=o,!0}})},i={dotAll:"s",global:"g",ignoreCase:"i",multiline:"m",sticky:"y"};for(var a in t&&(i.hasIndices="d"),i)r(a,i[a]);return Object.getOwnPropertyDescriptor(u,"flags").get.call(n)!==o||e!==o}))&&i(u,"flags",{configurable:!0,get:a})},7267:function(t,n,e){"use strict";var o=e(1735),r=e(2615),i=e(8844),a=e(8678),s=e(3689),c=e(5027),u=e(9985),l=e(981),f=e(8700),p=e(3126),d=e(4327),h=e(4684),y=e(1514),E=e(4849),g=e(7017),v=e(6100),T=e(4201)("replace"),m=Math.max,S=Math.min,A=i([].concat),O=i([].push),b=i("".indexOf),R=i("".slice),w="$0"==="a".replace(/./,"$0"),N=!!/./[T]&&""===/./[T]("a","$0");a("replace",(function(t,n,e){var i=N?"$":"$0";return[function(t,e){var o=h(this),i=l(t)?void 0:E(t,T);return i?r(i,t,o,e):r(n,d(o),t,e)},function(t,r){var a=c(this),s=d(t);if("string"==typeof r&&-1===b(r,i)&&-1===b(r,"$<")){var l=e(n,a,s,r);if(l.done)return l.value}var h=u(r);h||(r=d(r));var E,T=a.global;T&&(E=a.unicode,a.lastIndex=0);for(var w,N=[];null!==(w=v(a,s))&&(O(N,w),T);){""===d(w[0])&&(a.lastIndex=y(s,p(a.lastIndex),E))}for(var I,x="",C=0,_=0;_<N.length;_++){for(var P,L=d((w=N[_])[0]),D=m(S(f(w.index),s.length),0),j=[],k=1;k<w.length;k++)O(j,void 0===(I=w[k])?I:String(I));var M=w.groups;if(h){var U=A([L],j,D,s);void 0!==M&&O(U,M),P=d(o(r,void 0,U))}else P=g(L,s,D,j,M,r);D>=C&&(x+=R(s,C,D)+P,C=D+L.length)}return x+R(s,C)}]}),!!s((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}))||!w||N)},6544:function(t,n,e){"use strict";var o=e(9989),r=e(7697),i=e(9037),a=e(8844),s=e(6812),c=e(9985),u=e(3622),l=e(4327),f=e(2148),p=e(8758),d=i.Symbol,h=d&&d.prototype;if(r&&c(d)&&(!("description"in h)||void 0!==d().description)){var y={},E=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:l(arguments[0]),n=u(h,this)?new d(t):void 0===t?d():d(t);return""===t&&(y[n]=!0),n};p(E,d),E.prototype=h,h.constructor=E;var g="Symbol(description detection)"===String(d("description detection")),v=a(h.valueOf),T=a(h.toString),m=/^Symbol\((.*)\)[^)]+$/,S=a("".replace),A=a("".slice);f(h,"description",{configurable:!0,get:function(){var t=v(this);if(s(y,t))return"";var n=T(t),e=g?A(n,7,-1):S(n,m,"$1");return""===e?void 0:e}}),o({global:!0,constructor:!0,forced:!0},{Symbol:E})}},6265:function(t,n,e){"use strict";var o=e(9037),r=e(6338),i=e(3265),a=e(752),s=e(5773),c=e(4201),u=c("iterator"),l=c("toStringTag"),f=a.values,p=function(t,n){if(t){if(t[u]!==f)try{s(t,u,f)}catch(n){t[u]=f}if(t[l]||s(t,l,n),r[n])for(var e in a)if(t[e]!==a[e])try{s(t,e,a[e])}catch(n){t[e]=a[e]}}};for(var d in r)p(o[d]&&o[d].prototype,d);p(i,"DOMTokenList")}},o={};function r(t){var n=o[t];if(void 0!==n)return n.exports;var i=o[t]={id:t,loaded:!1,exports:{}};return e[t].call(i.exports,i,i.exports,r),i.loaded=!0,i.exports}r.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(n,{a:n}),n},r.d=function(t,n){for(var e in n)r.o(n,e)&&!r.o(t,e)&&Object.defineProperty(t,e,{enumerable:!0,get:n[e]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),r.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},r.nmd=function(t){return t.paths=[],t.children||(t.children=[]),t};var i={};return function(){"use strict";function t(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,o=new Array(n);e<n;e++)o[e]=t[e];return o}function n(n){return function(n){if(Array.isArray(n))return t(n)}(n)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(n)||function(n,e){if(n){if("string"==typeof n)return t(n,e);var o=Object.prototype.toString.call(n).slice(8,-1);return"Object"===o&&n.constructor&&(o=n.constructor.name),"Map"===o||"Set"===o?Array.from(n):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?t(n,e):void 0}}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e(t,n){return e=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t},e(t,n)}function o(t,n){t.prototype=Object.create(n.prototype),t.prototype.constructor=t,e(t,n)}r.d(i,{default:function(){return xr}});var a=r(4616);r(3964),r(6409);function s(){return s=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},s.apply(this,arguments)}r(2795),r(3383);const c={SETTITLE:"ANNOTATIONSETTITLE",SETSUBJECT:"ANNOTATIONSETSUBJECT",SETCOLOR:"ANNOTATIONSETCOLOR",SETOPACITY:"ANNOTATIONSETOPACITY",SETFILLCOLOR:"ANNOTATIONSETFILLCOLOR",SETBORDERWIDTH:"ANNOTATIONSETBORDERWIDTH",SETBORDERSTYLE:"ANNOTATIONSETBORDERSTYLE",SETBORDERINFO:"ANNOTATIONSETBORDERINFO",SETENDINGSTYLE:"ANNOTATIONSETENDINGSTYLE",ENABLECAPTION:"ANNOTATIONENABLECAPTION",SETROTATION:"ANNOTATIONSETROTATION",SETHIGHLIGHTINGMODE:"ANNOTATIONSETHIGHLIGHTINGMODE",REMOVEANNOT:"REMOVEANNOT",ADDANNOT:"ADDANNOT",SETRECT:"ANNOTATIONSETRECT",MOVETO:"ANNOTATION_MOVE_TO",ANNOT_SET_RECT:"ANNOTATION_SET_RECT",UPDATEQUADPOINTSBYCHARINDEX:"UPDATEQUADPOINTSBYCHARINDEX",UPDATECALLOUTPOINTS:"ANNOTATIONUPDATECALLOUTPOINTS",UPDATELINEPOINTS:"ANNOTATIONUPDATELINEPOINTS",SETLEADERLINELENGTH:"ANNOTATIONSETLEADERLINELENGTH",UPDATEVERTEXES:"ANNOTATIONUPDATEVERTEXES",SETCONTENT:"ANNOTATIONSETCONTENT",PLACEREDACT:"ANNOTATIONPLACEREDACT",ADDREPLY:"ANNOTATIONADDREPLY",DELETEREPLY:"ANNOTATIONDELETEREPLY",ADDACTION:"ANNOTATIONADDACTION",REMOVEACTION:"ANNOTATIONREMOVEACTION",MOVEACTION:"ANNOTATIONMOVEACTION",UPDATEACTION:"ANNOTATIONUPDATEACTION",ERASER:"ANNOTATIONERASER",MARKREDACTANNOT:"ANNOTATIONMARKREDACTANNOT",MAKEREDACTBYPAGES:"ANNOTATIONMAKEREDACTBYPAGES",MARKCHECKEDRESULTREDACTION:"MARKCHECKEDRESULTREDACTION",ADDREVIEWSTATE:"ADDREVIEWSTATE",ADD_MARKED_STATE:"ADD_MARKED_STATE",DEFAULTAP:"DEFAULTAP",moveAnnotsCrossPage:"moveAnnotsCrossPage",UPDATECAPTIONOFFSET:"ANNOTATIONUPDATECAPTIONOFFSET",Group:"Group",FlipPoint:"FlipPoint",SETICONNAME:"SETICONNAME",FLAG:"FLAG",SET_MEASUREMENT_RATIO:"ANNOTATION_SET_MEASUREMENT_RATIO",SET_MEASUREMENT_UNIT:"ANNOTATION_SET_MEASUREMENT_UNIT",SET_MEASURE_CONVERSION_FACTOR:"ANNOTATION_SET_MEASURE_CONVERSION_FACTOR",SET_CAPTION_COLOR:"ANNOTATION_SET_CAPTION_COLOR",SET_END_POINT:"ANNOTATION_SET_END_POINT",SET_START_POINT:"ANNOTATION_SET_START_POINT",SET_STYLE_FILL_COLOR:"ANNOTATION_SET_STYLE_FILL_COLOR",SET_LEADER_LINE_EXTEND:"ANNOTATION_SET_LEADER_LINE_EXTEND",SET_LEADER_LINE_OFFSET:"ANNOTATION_SET_LEADER_LINE_OFFSET",SET_LEADER_LINE_LENGTH:"ANNOTATION_SET_LEADER_LINE_LENGTH",SET_CAPTION_OFFSET:"ANNOTATION_SET_CAPTION_OFFSET",SET_VERTEXES:"ANNOTATION_SET_VERTEXES",SET_ALIGNMENT:"ANNOTATION_SET_ALIGNMENT",SET_INNER_RECT:"ANNOTATION_SET_INNER_RECT",SET_CALLOUT_LINE_ENDING_STYLE:"ANNOTATION_SET_CALLOUT_LINE_ENDING_STYLE",SET_DEFAULT_APPEARANCE:"FREETEXT_SET_DEFAULT_APPEARANCE",SET_INK_LIST:"ANNOTATION_SET_INK_LIST",SET_OVERLAY_TEXT:"REDACT_SET_OVERLAY_TEXT",REMOVE_OVERLAY_TEXT:"REDACT_REMOVE_OVERLAY_TEXT",SET_OVERLAY_TEXT_ALIGNMENT:"REDACT_REMOVE_OVERLAY_TEXT_ALIGNMENT",SET_REPEAT:"REDACT_SET_REPEAT",SET_AUTO_FONT_SIZE:"REDACT_SET_AUTO_FONT_SIZE",SET_REDACT_APPLY_FILL_COLOR:"REDACT_SET_REDACT_APPLY_FILL_COLOR",SET_IMAGE:"SCREEN_OR_STAMP_SET_IMAGE"},u="ADD",l="REMOVE";r(5847);let f=function(){function t(t){this.action=t,this.json={};let{type:n}=t;this[n]()}var n=t.prototype;return n.TypeGoto=function(){let{destination:t}=this.action;this.json=s(t,{type:t.zoomMode})},n.TypeURI=function(){let{uri:t}=this.action;this.json=s({},{uri:t})},n.TypeJavaScript=function(){let{javascript:t}=this.action;this.json=s({},{script:t})},n.TypeNamed=function(){let{name:t}=this.action;this.json=s({},{name:t})},n.TypeHide=function(){let{fieldNames:t,hideState:n}=this.action;this.json=s({},{fieldNames:t,hideState:n})},n.TypeSubmitForm=function(){let{flags:t,url:n,fieldNames:e}=this.action;this.json=s({},{flags:t,url:n,fieldNames:e})},n.TypeResetForm=function(){let{flags:t,fieldNames:n}=this.action;this.json=s({},{flags:t,fieldNames:n})},n.TypeGoToR=function(){let{destinationName:t,destination:n}=this.action;this.json=s({},{destinationName:t,destination:n})},n.toJson=function(){return this.json},t}();const p=a.PDFViewCtrl.Deps.jQuery,d=a.UIEvents,h=a.PDFViewCtrl.Consts.BORDER_STYLE;let y=function(){function t(t,n){this.pdfViewer=t,this.controller=n}var n=t.prototype;return n.init=function(){let t=this.controller;const n=this.pdfViewer;let e,r,i=0;const a=this.resetMergeStatus=()=>{e=void 0,i=0,r=void 0};n.registerMatchRule(((u,l)=>{function f(o,s){if(!n.customs.pushUndoStack||n.customs.pushUndoStack(o,s))return t.create("annot",o,s,function(){if(i++,!e)return e=u,r||(r=n.getAllActivatedElements().map((t=>t.annot)).filter(Boolean).filter((t=>"widget"!==t.getType()))),0===r.length||-1===r.indexOf(u)?(i--,e=void 0,r=void 0):r.length===i&&a(),!1;-1===r.indexOf(u)&&i--;const t=r.length;return i===t?(a(),!0):t>1}())}return function(e){function i(...n){var o;return(o=e.call.apply(e,[this].concat(n))||this).undoRedoDataRecord={},o.handler=t.getAnnotHandler(o.annot),o}o(i,e);var a=i.prototype;return a.setTitle=function(t){return this.handler.handleSetTitle((()=>this.annot.setTitle(t)))},a.setSubject=function(t){return this.handler.handleSetSubject((()=>this.annot.setSubject(t)))},a.setColor=function(t){return this.handler.handleSetColor((()=>e.prototype.setColor.call(this,t)))},a.setOpacity=function(t,n=!0,o=null){return this.handler.handleSetOpacity((()=>e.prototype.setOpacity.call(this,t)),n,o)},a.setFillColor=function(t){if(e.prototype.setFillColor)return this.handler.handleSetFillColor((()=>e.prototype.setFillColor.call(this,t)))},a.setBorderWidth=function(t,n=!0,o=null){return this.handler.handleSetBorderWidth((()=>e.prototype.setBorderWidth.call(this,t)),n,o)},a.setBorderStyle=function(t,n){return this.handler.handleSetBorderStyle((()=>e.prototype.setBorderStyle.call(this,t,n)))},a.flip=function(t){return this.handler.handleFlip((()=>this.annot.flip()),t)},a.setEndingStyle=function(t,n,o=!1){return this.handler.handleSetEndingStyle((()=>e.prototype.setEndingStyle.call(this,t,n)),t,o)},a.enableCaption=function(t){return this.handler.handleEnableCaption((()=>e.prototype.enableCaption.call(this,t)))},a.setRotation=function(t){return this.handler.handleSetRotation((()=>e.prototype.setRotation.call(this,t)))},a.setHighlightingMode=function(t){return this.handler.handleSetHighlightingMode((()=>e.prototype.setHighlightingMode.call(this,t)))},a.removeAnnot=function(){const t=this.annot,o=(t.getName(),t.info.type),i=!("sound"===o||"widget"===o||"watermark"===o);return i&&!r&&(r=n.getAllActivatedElements().map((t=>t.annot)).filter(Boolean),r.slice(0).forEach((t=>{const n=t.getGroupHeader&&t.getGroupHeader();if(n!==t){const t=r.indexOf(n);t>-1&&r.splice(t,1)}}))),e.prototype.removeAnnot.call(this).then((n=>(i&&n&&n.length>0&&f(c.REMOVEANNOT,[n,t]),n)))},a.textBoundaryStart=function(){this.undoRedoDataRecord[c.UPDATEQUADPOINTSBYCHARINDEX]={annot:this.annot,oldStart:this.annot.getStartCharIndex(),oldEnd:this.annot.getEndCharIndex()}},a.textBoundaryEnd=function(){const t=s({},this.undoRedoDataRecord[c.UPDATEQUADPOINTSBYCHARINDEX],{annot:this.annot,newStart:this.annot.getStartCharIndex(),newEnd:this.annot.getEndCharIndex()});f(c.UPDATEQUADPOINTSBYCHARINDEX,t)},a.onStartUpdateShape=function(t){if(this.isCallingOnShapeUpdate=!0,t in{resize:1,text:1}&&"freetext"===this.annot.getType()&&this.annot.getIntent&&"FreeTextCallout"===this.annot.getIntent())this.undoRedoDataRecord[c.UPDATECALLOUTPOINTS]={annot:this.annot,oldRect:this.annot.getRect(),oldCalloutLinePoints:this.annot.getCalloutLinePoints(),oldInnerRect:this.annot.getInnerRect()};else{let t=this.annot.getType();"square"===t||"circle"===t||"freetext"===t&&this.annot.getIntent&&"FreeTextTextbox"===this.annot.getIntent()?this.undoRedoDataRecord[c.SETRECT]={annot:this.annot,oldRect:this.annot.getRect(),oldInnerRect:this.annot.getInnerRect()}:this.undoRedoDataRecord[c.SETRECT]={annot:this.annot,oldRect:this.annot.getRect()}}return e.prototype.onStartUpdateShape.apply(this,arguments)},a.onShapeUpdateEnd=function(t,n,o){const r=e.prototype.onShapeUpdateEnd.apply(this,arguments);return r.finally((()=>{this.isCallingOnShapeUpdate=!1})),o in{resize:1,text:1}&&"freetext"===this.annot.getType()&&this.annot.getIntent&&"FreeTextCallout"===this.annot.getIntent()?r.then((()=>{const t=s({},this.undoRedoDataRecord[c.UPDATECALLOUTPOINTS],{annot:this.annot,newRect:this.annot.getRect(),newCalloutLinePoints:this.annot.getCalloutLinePoints(),newInnerRect:this.annot.getInnerRect()});f(c.UPDATECALLOUTPOINTS,t)})):r.then((()=>{const t=this.undoRedoDataRecord[c.SETRECT];let n,e=this.annot.getType();n="square"===e||"circle"===e||"freetext"===e&&this.annot.getIntent&&"FreeTextTextbox"===this.annot.getIntent()?s({},t,{annot:this.annot,newRect:this.annot.getRect(),newInnerRect:this.annot.getInnerRect()}):s({},t,{annot:this.annot,newRect:this.annot.getRect()}),f(c.SETRECT,n)}))},a.moveTo=function(t,n,o,r,i=!1){const a=this.annot.getRect(),s=this.getPDFPage();let u=t,l=n;if(!i){const e=s.reverseDevicePoint([t,n],this.scale,this.rotate);u=e[0],l=e[1]}return e.prototype.moveTo.apply(this,arguments).then((t=>(this.isCallingOnShapeUpdate||f(c.MOVETO,{annot:this.annot,originLeft:a.left,originTop:a.top,left:u,top:l,action:o,apply:r}),t)))},a.setRect=function(t){let n=this.annot.getRect();this.annot.getBorderStyle()===h.CLOUDY&&(n=this.annot.getInnerRect());const o=this.getPDFPage().reverseDeviceRect({left:t.left,top:t.top,right:t.left+t.width,bottom:t.top+t.height},this.scale,this.rotate);return e.prototype.setRect.apply(this,arguments).then((t=>(this.isCallingOnShapeUpdate||f(c.ANNOT_SET_RECT,{annot:this.annot,originRect:n,newRect:o}),t)))},a.boundaryChangeStart=function(t){if("line"===this.annot.getType())switch(p(t.target).data("index")){case 0:case 1:this.undoRedoDataRecord[c.UPDATELINEPOINTS]={annot:this.annot,oldStartPoint:this.annot.getStartPoint(),oldEndPoint:this.annot.getEndPoint()};break;case 2:case 3:this.undoRedoDataRecord[c.SETLEADERLINELENGTH]={annot:this.annot,oldLeaderLinePoints:this.annot.getLeaderLinePoints(),oldStartPoint:this.annot.getStartPoint(),oldEndPoint:this.annot.getEndPoint()};break;case"caption":this.undoRedoDataRecord[c.UPDATECAPTIONOFFSET]={annot:this.annot,oldCaptionOffset:this.annot.getCaptionOffset()}}else this.undoRedoDataRecord[c.UPDATEVERTEXES]={annot:this.annot,oldVertexes:this.annot.getVertexes(),oldIndex:p(t.target).data("index")}},a.boundaryChangeEnd=function(t){const n=p(t.target).data("index")||p(t.target).parent().data("index");if("line"===this.annot.getType())switch(n){case 0:case 1:{const t=s({},this.undoRedoDataRecord[c.UPDATELINEPOINTS],{annot:this.annot,newStartPoint:this.annot.getStartPoint(),newEndPoint:this.annot.getEndPoint()});f(c.UPDATELINEPOINTS,t)}break;case 2:case 3:{const t=s({},this.undoRedoDataRecord[c.SETLEADERLINELENGTH],{annot:this.annot,newLeaderLinePoints:this.annot.getLeaderLinePoints(),newStartPoint:this.annot.getStartPoint(),newEndPoint:this.annot.getEndPoint()});f(c.SETLEADERLINELENGTH,t)}break;case"caption":{const t=s({},this.undoRedoDataRecord[c.UPDATECAPTIONOFFSET],{annot:this.annot,newCaptionOffset:this.annot.getCaptionOffset()});f(c.UPDATECAPTIONOFFSET,t);break}}else{const t=s({},this.undoRedoDataRecord[c.UPDATEVERTEXES],{annot:this.annot,newVertexes:this.annot.getVertexes(),newIndex:n});f(c.UPDATEVERTEXES,t)}},a.setContent=function(t){return this.handler.handleSetContent((()=>e.prototype.setContent.call(this,t)))},a.placeRedact=function(t){return e.prototype.placeRedact.call(this,t).then((t=>{const n=t.flat().flat().flat().filter((t=>"redact"===t.getType()));return f(c.PLACEREDACT,{redacts:n}),t}))},a.setDefaultAppearance=function(t,n){return this.handler.handleSetDefaultAppearance((()=>e.prototype.setDefaultAppearance.call(this,t,n)))},a.setFlags=function(t){return this.handler.handleSetFlags((()=>this.annot.setFlags(t)))},a.setAction=function(t,n,e){return this.handler.handleSetAction((()=>this.annot.setAction(t,n,e)),t,n,e)},a.removeAction=function(t,n){return this.handler.handleRemoveAction((()=>this.annot.removeAction(t,n)),t,n)},a.moveAction=function(t){return this.handler.handleMoveAction(t)},a.setActionData=function(t,n){return this.handler.handleSetActionData(t,n)},i}(l)})),this.bindEvent()},n.bindEvent=function(){const t=this.controller,n=this.pdfViewer;function e(n,e){t.create("annot",n,e)}n.eventEmitter.on(d.addReplySuccess,(function(t,n){"sound"!==t.info.type&&e(c.ADDREPLY,{annot:t,replyAnnot:n})})),n.eventEmitter.on(d.deleteReplySuccess,(function(t,n){e(c.DELETEREPLY,{annot:t,replyAnnot:n})})),n.eventEmitter.on("annot-group-event",(function(t,n,o){e(c.Group,{page:t,annotIds:n,isGroup:o})})),n.eventEmitter.on(d.eraserSuccess,(function(t,n){e(c.ERASER,{beforeInks:t,afterInks:n})})),n.eventEmitter.on(d.addAnnotSuccess,(function(t){e(c.ADDANNOT,{annot:t})})),n.eventEmitter.on(d.applyRedaction,(function(n){t.clear()})),n.eventEmitter.on(d.addContentSuccess,(function(t,n,o){e(c.SETCONTENT,{annot:t,oldContent:n,newContent:o})})),n.eventEmitter.on(d.cancelAddAnnot,(function(){t.popUndoStack()})),n.eventEmitter.on("markRedactAnnotSuccess",(function(t){e(c.MARKREDACTANNOT,{annot:t})})),n.eventEmitter.on("makeRedactByPagesSuccess",(function(t){e(c.MAKEREDACTBYPAGES,{redacts:t})})),n.eventEmitter.on(d.markRedactionSuccess,(function(t){e(c.MARKCHECKEDRESULTREDACTION,{redacts:t})})),n.eventEmitter.on(d.addReviewStateSuccess,(function(t,n){"sound"!==t.info.type&&e(c.ADDREVIEWSTATE,{annot:t,stateName:n.getState()})})),n.eventEmitter.on(d.annotationMarkedStateAnnotAdd,(function(t,n,o){o||e(c.ADD_MARKED_STATE,{annot:n,stateName:t.getState()})})),n.eventEmitter.on(d.moveAnnotsToPages,(function(t,n,o,r){r&&e(c.moveAnnotsCrossPage,{srcPage:t,destPage:n,annots:o})})),n.eventEmitter.on("setNoteIconName",(function(t,n,o){n!==o&&e(c.SETICONNAME,{annot:t,oldIconName:n,newIconName:o})}));const o=()=>t.clear();n.eventEmitter.on(d.importPages,o),n.eventEmitter.on(d.pageAdded,o),n.eventEmitter.on(d.pageRemoved,o),n.eventEmitter.on(d.pagesRemoved,o),n.eventEmitter.on(d.pagesRotated,o),n.eventEmitter.on(d.pageMoved,o),n.eventEmitter.on(d.pagesMoved,o)},t}(),E=function(){function t(){this.stackArray=[]}var n=t.prototype;return n.push=function(t){this.stackArray.push(t)},n.pop=function(){return this.stackArray.pop()},n.size=function(){return this.stackArray.length},n.clear=function(){const t=this.stackArray,n=[];return this.stackArray=n,()=>{this.stackArray===n&&(this.stackArray=t)}},n.filter=function(t){this.stackArray=this.stackArray.filter(t)},t}(),g=function(){function t(t,n){this.pdfViewer=t,this.controller=n,this.undoStack=new E,this.redoStack=new E}var n=t.prototype;return n.storage=function(t){return this.undoStack.push(t),()=>{const n=this.undoStack.indexOf(t);n>-1&&this.undoStack.splice(n,1)}},n.mergeLast=function(t){const n=this.undoStack.pop();if(n){const e=this.doMerge(n,t);return this.undoStack.push(e),()=>{const t=this.undoStack.indexOf(e);t>-1&&(this.undoStack[t]=n)}}return this.storage(t)},n.doMerge=function(t,n){return{undo(){return Promise.resolve(t.undo()).finally((()=>n.undo()))},redo(){return Promise.resolve(t.redo()).finally((()=>n.redo()))}}},n.undo=function(){let t=this.undoStack.pop();if(t)return this.redoStack.push(t),t},n.redo=function(){let t=this.redoStack.pop();if(t)return this.undoStack.push(t),t},n.removeById=function(t){this.undoStack.filter((n=>t!==n.uniqueId)),this.redoStack.filter((n=>t!==n.uniqueId))},n.removeByName=function(t){this.undoStack.filter((n=>{if(n.annot)return t!==n.annot.info.name})),this.redoStack.filter((n=>{if(n.annot)return t!==n.annot.info.name}))},n.clear=function(){this.undoStack.clear(),this.redoStack.clear()},n.getUndoStack=function(){return this.undoStack},n.getRedoStack=function(){return this.redoStack},t}();r(278),r(752),r(6265),r(4043);const v=a.PDFViewCtrl.Consts.BORDER_STYLE;let T=function(){function t(t){let n=function(t,n="HTML",e=1){var o,r,i,a="";let s;"number"==typeof t&&(t=["int",t]);switch(t[0]){case"int":o=(16711680&t[1])>>16,r=(65280&t[1])>>8,i=255&t[1];break;case"T":o=0,r=0,i=0,e=0;break;case"G":o=r=i=255*t[1];break;case"RGB":o=255*t[1],r=255*t[2],i=255*t[3];break;case"CMYK":o=(1-t[4])*(1-t[1])*255,r=(1-t[4])*(1-t[2])*255,i=(1-t[4])*(1-t[3])*255;break;case"r":s=t.match(/rgba?\((\d*),\s*(\d*),\s*(\d*),?\s*([\.0-9]*)?\)/),o=+s[1],r=+s[2],i=+s[3];break;case"#":let n=4==t.length?/#([0-9a-fA-F])([0-9a-fA-F])([0-9a-fA-F])$/:/#([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/;s=t.match(n),o=parseInt(s[1],16),r=parseInt(s[2],16),i=parseInt(s[3],16);break;default:throw new Error("Unsupported color format")}switch(n){case"HTML":a=o===r&&r===i&&-1===i?"transparent":"rgba("+parseInt(o)+","+parseInt(r)+","+parseInt(i)+","+e+")";break;case"RGB":a=["RGB",o/255,r/255,i/255];break;case"#":a+=o<16?"#0"+o.toString(16):"#"+o.toString(16),a+=r<16?"0"+r.toString(16):r.toString(16),a+=i<16?"0"+i.toString(16):i.toString(16);break;case"int":a=0,a|=(e*=255)<<24,a|=o<<16,a|=r<<8,a|=i,a>>>=0}return a}(t.info.borderColor,"int");this.json={objectNumber:t.info.objectNumber,name:t.getName(),flags:t.info.flag,rect:t.info.rect,color:n,style:t.info.borderInfo.style,contents:t.info.content,date:new Date(t.info.modifiedTimestamp).getTime(),type:t.info.type,borderWidth:t.info.borderInfo.width},t.info.isMarkup&&this.markup(t);const e=t.info.type;switch("strikeout"!==e&&"highlight"!==e&&"squiggly"!==e&&"underline"!==e||this.textMarkup(t),e){case"ink":this.ink(t);break;case"fileattachment":this.fileattachment(t);break;case"polygon":this.polygon(t);break;case"polyline":this.polyline(t);break;case"stamp":this.stamp(t);break;case"freetext":this.freetext(t);break;case"screen":this.screen(t);break;case"line":this.line(t);break;case"redact":this.redact(t);break;case"highlight":this.highlight(t);break;case"link":this.link(t);break;case"square":this.square(t);break;case"circle":this.circle(t)}}var n=t.prototype;return n.markup=function(t){let n="",e=!1;if(t.getPopup){let o=t.getPopup();o?(n=o.getName(),e=!1):e=!0}else e=!0;this.json=s({intent:t.info.intent,opacity:t.info.opacity,subject:t.info.subject,title:t.info.title,creationTimestamp:new Date(t.info.creationTimestamp).getTime(),popId:n,noPopup:e},this.json)},n.textMarkup=function(t){let n=[];t.info.quadPoints.map((t=>{n.push({top:t[0].y,left:t[0].x,bottom:t[3].y,right:t[3].x})})),this.json=s(this.json,{coords:n})},n.ink=function(t){this.json=s({inkList:t.info.inkList},this.json)},n.fileattachment=function(t){this.json=s({fObjNum:t.info.fObjNum},this.json)},n.polygon=function(t){let n=m(t.info.borderInfo),e=t.info.measureRatio,o=t.info.measureUnit,r=null;e&&o&&(r={unit:o,ratio:e}),this.json=s(this.json,{vertexes:t.info.vertexes,borderStyle:n.style,borderStyleParam:n.param,fillColor:t.info.fillColor,style:void 0,measure:r})},n.polyline=function(t){let n=m(t.info.borderInfo),e=t.info.measureRatio,o=t.info.measureUnit,r=null;e&&o&&(r={unit:o,ratio:e}),this.json=s(this.json,{vertexes:t.info.vertexes,fillColor:t.info.fillColor,borderStyle:n.style,borderStyleParam:n.param,style:void 0,startStyle:t.info.startStyle,endStyle:t.info.endingStyle,measure:r})},n.stamp=function(t){this.json=s({icon:t.info.icon,rotate:(t.info.rotation+360)%360,apObjeNum:t.info.apObjeNum},this.json)},n.freetext=function(t){let n=m(t.info.borderInfo),e="FreeTextTypewriter"==t.info.intent?0:t.info.fillColor;this.json=s(this.json,{calloutLinePoints:t.info.calloutLinePoints,innerRect:t.info.innerRect,borderStyle:n.style,borderStyleParam:n.param,style:void 0,"interior-color":e,calloutLineEndingStyle:t.info.calloutLineEndingStyle,defaultAppearance:t.info.defaultAppearance,rotate:t.info.rotation})},n.line=function(t){let n=m(t.info.borderInfo),e=t.info.measureRatio,o=t.info.measureUnit,r=null;e&&o&&(r={unit:o,ratio:e});let i=t.info.startPoint,a=t.info.endPoint;this.json=s(this.json,{styleFillColor:t.info.styleFillColor,startStyle:t.info.startStyle,endStyle:t.info.endingStyle,enableCaption:t.info.hasCaption,startPoint:{x:i.x,y:i.y},endPoint:{x:a.x,y:a.y},measure:r,borderStyle:n.style,borderStyleParam:n.param,style:void 0})},n.screen=function(t){let n=m(t.info.borderInfo);this.json=s({apObjNum:t.info.apObjNum,opacity:t.info.opacity,rotate:{0:0,90:1,180:2,270:3}[t.info.rotation],iObjNum:t.info.iObjNum,aObjNum:t.info.aObjNum,intensity:n.param},this.json)},n.redact=function(t){let n=t.info.quadPoints,e=[];n.length>0?n.map((t=>{e.push({left:t[0].x,right:t[3].x,top:t[0].y,bottom:t[3].y})})):e.push(t.info.rect),this.json=s(this.json,{rects:e,applyFillColor:t.info.applyFillColor})},n.highlight=function(t){t.info.isArea&&(this.json=s(this.json,{coords:[t.info.rect],dicts:{AreaHi:"AreaHi"}}),delete this.json.startCharIndex,delete this.json.endCharIndex)},n.link=function(t){let n=m(t.info.borderInfo);this.json=s(this.json,{aObjNum:t.info.aObjNum,borderStyle:n.style,borderStyleParam:n.param,style:void 0,highlightingMode:t.info.highlightingMode})},n.circle=function(t){let n=m(t.info.borderInfo),e=t.info.measureRatio,o=t.info.measureUnit,r=null;e&&o&&(r={unit:o,ratio:e}),this.json=s(this.json,{fillColor:t.info.fillColor,borderStyle:n.style,borderStyleParam:n.param,style:void 0,measure:r})},n.square=function(t){let n=m(t.info.borderInfo),e=t.info.measureRatio,o=t.info.measureUnit,r=null;e&&o&&(r={unit:o,ratio:e}),this.json=s(this.json,{fillColor:t.info.fillColor,measure:r,borderStyle:n.style,borderStyleParam:n.param,style:void 0})},n.getJson=function(){return this.json},t}();function m(t){const{style:n,cloudIntensity:e,dashes:o}=t;let r;switch(n){case v.SOLID:r=[];break;case v.CLOUDY:r=e;break;case v.DASHED:r=o}return{style:n,param:r}}var S=r(361),A=r.n(S);function O(t){if(!t)return[];const n=[];return function t(e){if(n.push(e),1===e.subAction.length)t(e.subAction[0]);else for(let t=0;t<e.subAction.length;t++)n.push(e.subAction[t])}(t),n}function b(t,n,e){if(n&&!Array.isArray(n)&&"number"==typeof n.length){var o=n.length;return function(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,o=new Array(n);e<n;e++)o[e]=t[e];return o}(n,void 0!==e&&e<o?e:o)}return t(n,e)}a.PDFViewCtrl.Consts.Intents;const R=a.PDFViewCtrl.shared.QueuedAsyncTaskExecutor,w=a.PDFViewCtrl.Consts.BORDER_STYLE;let N=function(t,e,o,r,i,a,c,f,p,d,h,y,E,g,v,m,S,R,N,D,j,k,M,U,V,F,B,G,H,Y,W,K,z,X,$,q,J,Q,Z,tt,nt,et,ot,rt,it,at,st,ct,ut,lt,ft,pt,dt,ht,yt,Et,gt,vt,Tt,mt,St,At,Ot,bt,Rt,wt,Nt){function It(t){this.pdfViewer=t,this.pdfViewer.recordsMap={}}var xt=It.prototype;return xt[t]=function({annot:t,oldTitle:n,newTitle:e}){const o=this.pdfViewer;function r(n){return function(){return I(o,t).annot.setTitle(n)}}return{undo:r(n),redo:r(e)}},xt[e]=function({annot:t,oldSubject:n,newSubject:e}){const o=this.pdfViewer;function r(n){return function(){return I(o,t).annot.setSubject(n)}}return{undo:r(n),redo:r(e)}},xt[o]=function({annot:t,oldColor:n,newColor:e}){const o=this.pdfViewer;function r(n){return function(){let e=I(o,t);return-1===n&&(n=0),e.annot.setBorderColor(n).then((()=>{e.updateRender()}))}}return{undo:r(n),redo:r(e)}},xt[r]=function({annot:t,oldOpacity:n,newOpacity:e}){const o=this.pdfViewer;function r(n){return function(){let e=I(o,t);return e.annot.setOpacity(n).then((()=>{e.updateRender()}))}}return{undo:r(n),redo:r(e)}},xt[i]=function({annot:t,oldFillColor:n,newFillColor:e}){const o=this.pdfViewer;function r(n){return function(){let e=I(o,t);return(e.annot.setStyleFillColor||e.annot.setFillColor).call(e.annot,n)}}return{undo:r(n),redo:r(e)}},xt[a]=function({annot:t,oldBorderWidth:n,newBorderWidth:e}){const o=this.pdfViewer;function r(n){return function(){return I(o,t).annot.setBorderWidth(n)}}return{undo:r(n),redo:r(e)}},xt[c]=function({annot:t}){const n=this.pdfViewer;function e(t){return()=>I(n,t).annot.flip()}return{undo:e(t),redo:e(t)}},xt[f]=function({annot:t,oldBorderStyle:n,newBorderStyle:e}){const o=this.pdfViewer;function r(n){return function(){return I(o,t).annot.setBorderStyle(n.style,n.param)}}return{undo:r(n),redo:r(e)}},xt[p]=function({annot:t,oldBorderInfo:n,newBorderInfo:e}){return this._common_interpreter(t,"setBorderInfo",[e],[n])},xt[d]=function({annot:t,oldMeasureRatio:n,newMeasureRatio:e}){return this._common_interpreter(t,"setMeasureRatio",[e],[n])},xt[h]=function({annot:t,oldUnit:n,newUnit:e}){return this._common_interpreter(t,"setMeasureUnit",[e],[n])},xt[y]=function({annot:t,oldFactor:n,newFactor:e}){return this._common_interpreter(t,"setMeasureConversionFactor",[e],[n])},xt[E]=function({annot:t,oldCaptionColor:n,newCaptionColor:e}){return this._common_interpreter(t,"setCaptionColor",[e],[n])},xt[g]=function({annot:t,isStart:n,oldStyle:e,newStyle:o}){const r=this.pdfViewer;function i(e){return function(){let o=I(r,t);return o.annot.setCalloutLineEndingStyle?o.annot.setCalloutLineEndingStyle(+e).then((()=>{o.redraw(),o.activeRect()})):o.annot.setEndingStyle(n,+e).then((()=>{o.redraw(),o.activeRect()}))}}return{undo:i(e),redo:i(o)}},xt[v]=function({annot:t,oldEndPoint:n,newEndPoint:e}){return this._common_interpreter(t,"setEndPoint",[e],[n])},xt[m]=function({annot:t,oldStartPoint:n,newStartPoint:e}){return this._common_interpreter(t,"setStartPoint",[e],[n])},xt[S]=function({annot:t,oldStyleFillColor:n,newStyleFillColor:e}){return this._common_interpreter(t,"setStyleFillColor",[e],[n])},xt[R]=function({annot:t,newLength:n,oldLength:e}){return this._common_interpreter(t,"setLeaderLineExtend",[n],[e])},xt[N]=function({annot:t,newOffset:n,oldOffset:e}){return this._common_interpreter(t,"setLeaderLineOffset",[n],[e])},xt[D]=function({annot:t,newLength:n,oldLength:e}){return this._common_interpreter(t,"setLeaderLineLength",[n],[e])},xt[j]=function({annot:t,newOffset:n,oldOffset:e}){return this._common_interpreter(t,"setCaptionOffset",[n.x,n.y],[e.x,e.y])},xt[k]=function({annot:t,oldEnableCaption:n,newEnableCaption:e}){return this._common_interpreter(t,"enableCaption",[e],[n])},xt[M]=function({annot:t,oldRotation:n,newRotation:e,oldRect:o,newRect:r}){const i=this.pdfViewer;function a(n,e){return async function(){const o=await x(i,t);let r=I(i,t);return"screen"===o.getType()?o.setRect(e).then((t=>{if(t)return o.setRotation((n+360)%360).then((()=>{r&&r.activeRect()}))})):o.setRotation((n+360)%360).then((()=>{r&&r.activeRect()}))}}return{undo:a(n,o),redo:a(e,r)}},xt[U]=function({annot:t,oldHlMode:n,newHlMode:e}){const o=this.pdfViewer;function r(n){return async function(){return(await x(o,t)).setHighlightingMode(n)}}return{undo:r(n),redo:r(e)}},xt[V]=function([t,n]){const e=this.pdfViewer;return{undo:C(e,t,n),redo:_(n,e)}},xt[F]=function({annot:t}){const n=this.pdfViewer;let e=[t],o=t.getPopup&&t.getPopup();return o&&!o.isEmpty()&&e.push(o),t.isReplace&&t.isReplace()&&(e=t.getGroupElements().map((t=>t)),e.push(t.getGroupHeader().getPopup())),{undo:_(t,n),redo:C(n,e,t),annot:t}},xt[B]=function({annot:t,oldStart:n,oldEnd:e,newStart:o,newEnd:r}){const i=this.pdfViewer;function a(n,e){return function(){let o=I(i,t);return o.annot.updateQuadPointsByCharIndex(n,e).then((()=>{if(o.redraw(),o.isReplace)return o.caretAnnot.moveRectByCharIndex(e).then((()=>{o.getGroupRenders().map((t=>{t.active()}))}));o.active()}))}}return{undo:a(n,e),redo:a(o,r)}},xt[G]=function({annot:t,oldRect:n,newRect:e,oldInnerRect:o,newInnerRect:r}){const i=this.pdfViewer;function a(n,e){return function(){let o=I(i,t);return e?o.annot.setRectAndInnerRect(n,e).then((()=>{o.redraw(),o.active()})):o.annot.setRect(n).then((()=>{o.redraw(),o.active()}))}}return{undo:a(n,o),redo:a(e,r)}},xt[H]=function({annot:t,originRect:n,newRect:e}){const o=this.pdfViewer;function r(n){return async function(){const e=I(o,t),r=await t.getBorderStyle(),i=await t.getCloudIntensity(),a=await t.getBorderWidth();r===w.CLOUDY&&(await t.setBorderStyle(0),await t.setBorderWidth(0)),await t.setRect(n),r===w.CLOUDY&&(await t.setBorderStyle(r,i),await t.setBorderWidth(a)),e.redraw(),e.active()}}return{undo:r(n),redo:r(e)}},xt[Y]=function({annot:t,originLeft:n,originTop:e,left:o,top:r}){const i=this.pdfViewer;function a(n,e){return()=>{const o=I(i,t);return o&&o.annot?o.annot.moveTo({left:n,top:e}).then((()=>{o.redraw(),o.active()})):Promise.resolve()}}return{undo:a(n,e),redo:a(o,r)}},xt[W]=function({annot:t,oldRect:n,oldCalloutLinePoints:e,oldInnerRect:o,newRect:r,newCalloutLinePoints:i,newInnerRect:a}){const s=this.pdfViewer;function c(n,e,o){return function(){let r=I(s,t);return r.annot._setRect(n,!1).then((()=>r.annot.setInnerRectNoAction(o).then((()=>r.annot.setCalloutLinePoints(e).then((()=>r.annot.update().then((()=>{r.redraw(),r.active()}))))))))}}return{undo:c(n,e,o),redo:c(r,i,a)}},xt[K]=function({annot:t,oldStartPoint:n,oldEndPoint:e,newStartPoint:o,newEndPoint:r}){const i=this.pdfViewer;function a(n,e){return function(){let o=[],r=I(i,t);return o.push(r.annot.setStartPoint(n)),o.push(r.annot.setEndPoint(e)),Promise.all(o).then((()=>{r.active()}))}}return{undo:a(n,e),redo:a(o,r)}},xt[z]=function({annot:t,oldLeaderLinePoints:n,oldStartPoint:e,oldEndPoint:o,newLeaderLinePoints:r,newStartPoint:i,newEndPoint:a}){const s=this.pdfViewer;function c(n,e,o){let{start:r,end:i}=n,a=Math.sqrt(Math.pow(e.x-r.x,2)+Math.pow(e.y-r.y,2)),c=!0;return(o.x-e.x)*(r.y-o.y)-(r.x-o.x)*(o.y-e.y)>0&&(c=!1),c&&(a=-a),function(){let n=I(s,t);return n.annot.setLeaderLineLength(a).then((()=>{n.active()}))}}return{undo:c(n,e,o),redo:c(r,i,a)}},xt[X]=function({annot:t,oldVertexes:n,oldIndex:e,newVertexes:o,newIndex:r}){const i=this.pdfViewer;function a(n,e){return function(){let o=I(i,t);return o.annot.updateVertexes(n,e[n]).then((()=>{o.active()}))}}return{undo:a(e,n),redo:a(r,o)}},xt[$]=function({annot:t,newVertexes:n,oldVertexes:e}){return this._common_interpreter(t,"setVertexes",[n],[e])},xt[q]=function({annot:t,oldContent:n,newContent:e,oldInnerRect:o,newInnerRect:r,oldRect:i,newRect:a,oldCalloutLinePoints:s,newCalloutLinePoints:c}){const u=this.pdfViewer,l=t.getId();let f=[];u.recordsMap[l]?f=u.recordsMap[l]:(u.recordsMap[l]=f,f.push({modifyDate:t.getCreateDateTime(),content:n}));const p=f.findIndex((t=>t.content===n));function d(n,e,o,r){return function(){return x(u,t).then((t=>t.setContent(n).then((()=>{const i=(u.recordsMap[t.getId()]||[]).map((i=>{if(i.content===n)return o?t.setRect(o).then((()=>e&&t.setInnerRect(e).then((()=>r&&t.setCalloutLinePoints(r).then((()=>{let n=I(u,t);return n.redraw(),n.active(),t._setModifiedDateTime(i.modifyDate)})))))):t._setModifiedDateTime(i.modifyDate)}));return Promise.all(i)}))))}}return-1!==p&&(f.length=p+1),f.push({modifyDate:t.getModifiedDateTime(),content:e}),{undo:d(n,o,i,s),redo:d(e,r,a,c)}},xt[J]=function({redacts:t}){const n=this.pdfViewer,e=t.map((t=>{const n=t.getPopup&&t.getPopup();return n&&!n.isEmpty()?[t,n]:[t]}));return{undo:function(){return Promise.all(t.map((t=>t.getPDFPage().removeAnnot(t))))},redo:function(){return Promise.all(e.map((t=>{if(t.length<1)return;return t[0].page.addAnnotObjects(t.map((t=>t.objectNumber))).then((e=>{n.killFocus();let o=I(n,t[0]);o&&o.active()}))})))}}},xt[Q]=function({annot:t,replyAnnot:n}){const e=this.pdfViewer;return{undo:L(t,A()(n),e),redo:P(t,A()(n),e)}},xt[Z]=function({annot:t,replyAnnot:n}){const e=this.pdfViewer;return{undo:P(t,A()(n),e),redo:L(t,A()(n),e)}},xt[tt]=function({annot:t,param:n}){const e=this.pdfViewer;function o(t,n,e,o){return function(){I(o,e);let{trigger:r,action:i,append:a}=n;switch(t){case u:return e.setAction(i,r,a);case l:const t=O(e.getAction(r));return i=t[t.length-1],e.removeAction(r,i)}}}return{undo:o(l,n,t,e),redo:o(u,n,t,e)}},xt[nt]=function({annot:t,param:n}){const e=this.pdfViewer;function o(t,n,e,o){return function(){I(o,e);let{trigger:r,index:i,oldActions:a}=n;const s="screen"==e.getType()?e.getAdditionalAction(r):e.getAction(r);switch(t){case u:if(i>-1)return 0==i?e.removeAction(r).then((t=>{let n=[];return a.forEach((t=>{n.push(e.setAction(t,r,!0))})),Promise.all(n)})):s.insertSubAction(i-1,a[i].info);{let t=[];return a.forEach((n=>{t.push(e.setAction(n,r,!0))})),Promise.all(t)}case l:const t=O(s);return e.removeAction(r,t[i])}}}return{undo:o(u,n,t,e),redo:o(l,n,t,e)}},xt[et]=function({annot:t,moveInfo:n}){const e=this.pdfViewer;function o(n){return function(){let o=I(e,t);t.getAction();return o.annot.moveAction(n)}}return{undo:o(s({},n,{direction:!n.direction})),redo:o(n)}},xt[ot]=function({annot:t,action:n,oldData:e,newData:o}){const r=this.pdfViewer;function i(n,e){return function(){return I(r,t).annot.setActionData(n,e)}}return{undo:i(n,e),redo:i(n,o)}},xt[rt]=function({beforeInks:t,afterInks:n}){const e=this.pdfViewer;return{undo:function(){const o=t.map(((t,o)=>{let{annot:r,inkList:i,isRemove:a}=t;if(a)return C(e,n[o].params,r,!1)().then((t=>I(e,r).annot.setInkList(i)));{let t=I(e,r);return t&&t.annot.setInkList(i)}}));return Promise.all(o)},redo:function(){const t=n.map((t=>{let{annot:n,inkList:o,isRemove:r}=t;if(r)return _(n,e)();{let n=I(e,t.annot);return n&&n.annot.setInkList(t.inkList)}}));return Promise.all(t)}}},xt[it]=function({annot:t}){const n=this.pdfViewer;let e=[t],o=t.getPopup();return o&&!o.isEmpty()&&e.push(o),{undo:_(t,n),redo:C(n,e,t)}},xt[at]=function({redacts:t}){const n=this.pdfViewer;let e=[];return t.map((t=>{e.push(new T(t).getJson())})),{undo:function(){return Promise.all(t.map((t=>t.getPDFPage().removeAnnot(t))))},redo:C(n,t,t[0])}},xt[st]=function({redacts:t}){const n=this.pdfViewer;let e=[];return t.map((t=>{e.push(new T(t).getJson())})),{undo:function(){return Promise.all(t.map((t=>t.getPDFPage().removeAnnot(t))))},redo:C(n,t,t[0])}},xt[ct]=function({annot:t,stateName:n}){const e=this.pdfViewer;let o=t.getPDFPage();const r=t.getObjectNumber();let i=t.getReviewStates().find((t=>t.info.state===n));return{undo:function(){return o.getAnnotsByObjectNumArray([r]).then((t=>t[0]&&t[0].removeReviewState()))},redo:function(){return o.getAnnotsByObjectNumArray([r]).then((t=>function(t,n,e,o,r=!0){let i=e[0].page;return i.addReviewStateAnnotObject(n,e.map((t=>t.objectNumber))).then((n=>{t.killFocus();let e=I(t,o);r&&e&&e.active()}))}(e,t[0],[i],i)))}}},xt[ut]=function({annot:t,stateName:n}){const e=this.pdfViewer;let o=t.getMarkedStates().find((t=>t.info.state===n));function r(n){return t.page.getAnnotsByObjectNumArray([n]).then((([t])=>t))}return{undo:function(){return r(t.objectNumber).then((t=>t.removeMarkedState()))},redo:function(){return r(t.objectNumber).then((t=>function(t,n,e,o,r=!0){return e[0].page.addMarkedStateAnnotObject(n,e.map((t=>t.objectNumber)),!0,!0).then((n=>{t.killFocus();let e=I(t,o);r&&e&&e.active()}))}(e,t,[o],o)))}}},xt[lt]=function({annot:t,oldDA:n,newDA:e}){const o=this.pdfViewer;function r(n){return function(){let e=I(o,t);return e.annot.setDefaultAppearance(n).then((()=>{e.active()}))}}return{undo:r(n),redo:r(e)}},xt[ft]=function({srcPage:t,destPage:n,annots:e}){const o=this.pdfViewer.getCurrentPDFDoc();let r=Object.keys(e).reduce(((t,n)=>{let o=e[n];return t[n]={rect:o.oldRect,oldRect:o.rect},t}),{});return{undo:()=>o.moveAnnotsToPage(n,t,r,!0),redo:()=>o.moveAnnotsToPage(t,n,e,!0)}},xt[pt]=function({annot:t,oldCaptionOffset:n,newCaptionOffset:e}){const o=this.pdfViewer;function r(n){return function(){let e=I(o,t);return e.annot.setCaptionOffset(n.x,n.y).then((()=>{e.active()}))}}return{undo:r(n),redo:r(e)}},xt[dt]=function({page:t,annotIds:n,isGroup:e}){return{undo:()=>{this.pdfViewer.killFocus(),t.handleGroupMarkup(n,!e)},redo:()=>{this.pdfViewer.killFocus(),t.handleGroupMarkup(n,e)}}},xt[ht]=function({annot:t,oldIconName:n,newIconName:e}){return this._common_interpreter(t,"setIconName",[e],[n])},xt[yt]=function({annot:t,oldAlignment:n,newAlignment:e}){return this._common_interpreter(t,"setAlignment",[e],[n])},xt[Et]=function({annot:t,oldInnerRect:n,newInnerRect:e}){return this._common_interpreter(t,"setInnerRect",[e],[n])},xt[gt]=function({annot:t,oldFlag:n,newFlag:e}){const o=this.pdfViewer;function r(n){return function(){return I(o,t).annot.setFlags(n)}}return{undo:r(n),redo:r(e)}},xt[vt]=function({annot:t,newStyle:n,oldStyle:e}){return this._common_interpreter(t,"setCalloutLineEndingStyle",[n],[e])},xt[Tt]=function({annot:t,newAp:n,oldAp:e}){return this._common_interpreter(t,"setDefaultAppearance",[n],[e])},xt[mt]=function({annot:t,oldInkList:n,newInkList:e}){return this._common_interpreter(t,"setInkList",[e],[n])},xt[St]=function({annot:t,newValue:n,oldValue:e}){return this._common_interpreter(t,((t,n)=>"string"==typeof n?t.setOverlayText(n):t.removeOverlayText()),[n],[e])},xt[At]=function({annot:t,oldValue:n}){return this._common_interpreter(t,((t,n)=>"string"==typeof n?t.setOverlayText(n):t.removeOverlayText()),[],[n])},xt[Ot]=function({annot:t,newValue:n,oldValue:e}){return this._common_interpreter(t,"setOverlayTextAlignment",[n],[e])},xt[bt]=function({annot:t,newValue:n,oldValue:e}){return this._common_interpreter(t,"setRepeat",[n],[e])},xt[Rt]=function({annot:t,newValue:n,oldValue:e}){return this._common_interpreter(t,"setAutoFontSize",[n],[e])},xt[wt]=function({annot:t,newValue:n,oldValue:e}){return this._common_interpreter(t,"setRedactApplyFillColor",[n],[e])},xt[Nt]=function({annot:t,newValue:n,oldValue:e}){return this._common_interpreter(t,"setImage",[n],[e])},xt._common_interpreter=function(t,e,o,r){const i=this.pdfViewer;function a(o){return async()=>{const r=I(i,t),a=r?r.annot:await x(i,t);return"function"==typeof e?e.apply(void 0,[a].concat(b(n,o))):a[e].apply(a,b(n,o))}}return{undo:a(r),redo:a(o)}},It}(c.SETTITLE,c.SETSUBJECT,c.SETCOLOR,c.SETOPACITY,c.SETFILLCOLOR,c.SETBORDERWIDTH,c.FlipPoint,c.SETBORDERSTYLE,c.SETBORDERINFO,c.SET_MEASUREMENT_RATIO,c.SET_MEASUREMENT_UNIT,c.SET_MEASURE_CONVERSION_FACTOR,c.SET_CAPTION_COLOR,c.SETENDINGSTYLE,c.SET_END_POINT,c.SET_START_POINT,c.SET_STYLE_FILL_COLOR,c.SET_LEADER_LINE_EXTEND,c.SET_LEADER_LINE_OFFSET,c.SET_LEADER_LINE_LENGTH,c.SET_CAPTION_OFFSET,c.ENABLECAPTION,c.SETROTATION,c.SETHIGHLIGHTINGMODE,c.REMOVEANNOT,c.ADDANNOT,c.UPDATEQUADPOINTSBYCHARINDEX,c.SETRECT,c.ANNOT_SET_RECT,c.MOVETO,c.UPDATECALLOUTPOINTS,c.UPDATELINEPOINTS,c.SETLEADERLINELENGTH,c.UPDATEVERTEXES,c.SET_VERTEXES,c.SETCONTENT,c.PLACEREDACT,c.ADDREPLY,c.DELETEREPLY,c.ADDACTION,c.REMOVEACTION,c.MOVEACTION,c.UPDATEACTION,c.ERASER,c.MARKREDACTANNOT,c.MAKEREDACTBYPAGES,c.MARKCHECKEDRESULTREDACTION,c.ADDREVIEWSTATE,c.ADD_MARKED_STATE,c.DEFAULTAP,c.moveAnnotsCrossPage,c.UPDATECAPTIONOFFSET,c.Group,c.SETICONNAME,c.SET_ALIGNMENT,c.SET_INNER_RECT,c.FLAG,c.SET_CALLOUT_LINE_ENDING_STYLE,c.SET_DEFAULT_APPEARANCE,c.SET_INK_LIST,c.SET_OVERLAY_TEXT,c.REMOVE_OVERLAY_TEXT,c.SET_OVERLAY_TEXT_ALIGNMENT,c.SET_REPEAT,c.SET_AUTO_FONT_SIZE,c.SET_REDACT_APPLY_FILL_COLOR,c.SET_IMAGE);function I(t,n){const e=t.getAnnotRender(n.page.getIndex(),n.objectNumber);return e?e.component:null}function x(t,n){return t.getCurrentPDFDoc().getPageByIndex(n.page.getIndex()).then((t=>t.getAnnotsByObjectNumArray([n.objectNumber]).then((t=>t[0]))))}function C(t,n,e,o=!0){if(n.length<1)return;let r=n[0].page;return()=>r.addAnnotObjects(n.map((t=>t.objectNumber))).then((n=>{t.killFocus();let r=I(t,e);o&&r&&r.active()}))}function _(t,n){return function(){n.activeElement();let e=I(n,t);return e&&e.annot&&e.annot.getPDFPage().removeAnnot(e.annot).then((t=>{const o=n.getCurrentActivatable();return o&&o.remove&&o.remove(e),t}))}}function P(t,n,e){return function(){let e=t.page;return e.addAnnotObjects([n.objectNumber],!1).then((o=>{t=e.annotIdMap[t.objectNumber];let{reviewStates:r}=n;if(r.length>0){let t=[];r.map((n=>{t.push(n.info.state)})),function(t,n){const e=new R;n.forEach((n=>{e.exec((()=>t.addReviewState(n)))})),e.waitForCurrentRunningTasks()}(o[0],t)}t.info.repliesSummary.some((t=>t.objectNumber==n.objectNumber))||(t.info.repliesSummary.push({objectNumber:o[0].info.objectNumber,id:o[0].info.objectNumber,index:o[0].info.index}),t.replies.push(o[0])),e.doc.engine.eventEmitter.emit("annotation-reply-add",o[0],t),e.doc.engine.eventEmitter.emit("annotation-updated",[t],e,"add-replies")}))}}function L(t,n,e){return function(){return t.getPDFPage().removeAnnot(n)}}let D=function(){function t(t){this.pdfViewer=t}return t.prototype.add=function(t,n){this[t]=n},t}(),j=function(){function t(t){this.pdfViewer=t}var n=t.prototype;return n.add=function(t){return{undo:V(this.pdfViewer,t),redo:U(this.pdfViewer,t)}},n.remove=function(t){return M.push(t.bookmark.id),{undo:U(this.pdfViewer,t),redo:V(this.pdfViewer,t)}},n.rename=function({bookmark:t,newName:n,oldName:e}){return{undo:F(this.pdfViewer,{bookmark:t,name:e}),redo:F(this.pdfViewer,{bookmark:t,name:n})}},n.setColor=function({bookmark:t,newColor:n,oldColor:e}){return{undo:G(this.pdfViewer,{bookmark:t,style:e}),redo:G(this.pdfViewer,{bookmark:t,style:n})}},n.setStyle=function({bookmark:t,newStyle:n,oldStyle:e}){return{undo:B(this.pdfViewer,{bookmark:t,style:e}),redo:B(this.pdfViewer,{bookmark:t,style:n})}},n.clear=function(){k={},M=[]},t}(),k={},M=[];function U(t,n){let e=n.bookmark,o=e.id,r=e.page,i=e.left||0,a=e.top||0,c=e.title,u=s([],e.children),l=n.siblingBookmark,f=l.id,p=n.position;return()=>{e=k[o]||e,l=k[f]||l,c=e.title,u=u.filter((t=>-1===M.indexOf(t.id))),l.insertBookmark(c,r,a,i,p).then((n=>{H(o,n),H(n.id,n),o=n.id,u.forEach((e=>{U(t,{bookmark:e,siblingBookmark:n})()}))}))}}function V(t,n){let e=n.bookmark,o=e.id,r=e.parent.children;return()=>{if(e=k[o]||e,o=e.id,e){M.push(o),e.remove();for(let t=0;t<r.length;t++){if(r[t].id===e.id){r.splice(t,1);break}}}}}function F(t,n){let e=n.bookmark,o=e.id;const r=n.name;return()=>{e=k[o]||e,e&&e.setProperty({title:r},!1).then((n=>{H(e.id,n),H(o,n),t.eventEmitter.emit("bookmark-update-attr",e.id,{name:r})}))}}function B(t,n){let e=n.bookmark,o=e.id;const r=n.style,[i,a]=r;return()=>{e=k[o]||e,e&&e.setProperty({style:i|a},!1).then((()=>{e.isItalic=i,e.isBold=a,H(o,e),t.eventEmitter.emit("bookmark-update-attr",e.id,{isBold:a,isItalic:i})}))}}function G(t,n){let e=n.bookmark,o=e.id;const r=n.style;return()=>{e=k[o]||e,e&&e.setProperty({color:r},!1).then((()=>{e.color=r,H(o,e),t.eventEmitter.emit("bookmark-update-attr",e.id,{color:r})}))}}function H(t,n){const e=k[t];if(k[t]=n,e)for(const t in k){k[t].id===e.id&&(k[t]=n)}}r(6544),r(7267);let Y=function(){function t(t){this.pdfViewer=t,this.fileNameObjNumMapping={}}var n=t.prototype;return n.add=function(t){return{undo:z(this.pdfViewer,t),redo:K(this.pdfViewer,t)}},n.remove=function(t){return{undo:K(this.pdfViewer,t),redo:z(this.pdfViewer,t)}},n.setDesc=function(t){let n=t.fileName;const e=t.description,o=t.objNum,r=t.annot;return n=(r?"annot_":"")+n,W[n]||(W[n]={objNum:o,description:e}),{undo:X(this.pdfViewer,{fileName:t.fileName,objNum:t.objNum,description:t.descriptionOld,annot:r}),redo:X(this.pdfViewer,{fileName:t.fileName,objNum:t.objNum,description:t.description,annot:r})}},n.replace=function(t){const n=this.pdfViewer.currentPDFDoc,e=t.oldFile,o=e.fileName,r=e.objNum,i=e.description,a=t.objNum;return{undo:()=>{n.setEmbeddedFileByAttachments(o,r).then((()=>{i&&X(this.pdfViewer,{fileName:o,objNum:r,description:i})}))},redo:()=>{n.setEmbeddedFileByAttachments(o,a)}}},n.clear=function(){W={}},t}(),W={};function K(t,n){const e=n.fileName;return W[e]||(W[e]={}),n.hasOwnProperty("objNum")&&(W[e].objNum=n.objNum),n.hasOwnProperty("fileBuffer")&&(W[e].fileBuffer=n.fileBuffer),()=>{const n=t.currentPDFDoc,{fileBuffer:o,description:r}=W[e];return n.addFileSpec(e,o,new Date).then((t=>(W[e].objNum=t,n.addEmbeddedFileByAttachments(e,t).then((()=>r&&n.setFileSpecDesc(r,t))))))}}function z(t,n){const e=n.fileName;return()=>{t.currentPDFDoc.removeEmbeddedFileByAttachments(e)}}function X(t,n){let e=n.fileName;const o=n.description,r=n.annot;let i,a,s=n.objNum;return r&&(i=r.getPage().getIndex(),a=r.getObjectNumber(),e="annot_"+e),()=>{const n=W[e];t.currentPDFDoc.setFileSpecDesc(o,n.objNum||s).then((()=>{if(W[e].description=o,a){const n=t.getAnnotRender(i,a),e=n&&n.annot;e&&e.setContent(o).then((()=>e.update()))}}))}}let $=function(){function t(t){this.pdfViewer=t}var n=t.prototype;return n.rotate=function(t){const n={},e={};for(const o in t){const{from:r,to:i}=t[o];n[o]=r,e[o]=i}return{undo:q(this.pdfViewer,n),redo:q(this.pdfViewer,e)}},n.clear=function(){},t}();function q(t,n){return()=>{for(const e in n){const o=n[e];t.getPDFDocRender().getPDFPageRender(e).page.setRotation(o),t.collaborate("ppo-rotate-page",{pageIndex:e,angle:90*o})}}}const J="onUndoRedo";let Q=function(){function t(t,n){this.controller=t,this.annot=n,this.manager=t.annotUndoRedoManager}var n=t.prototype;return n.handleSetTitle=function(t){const n=this.annot.getTitle();return t().then((t=>{const e=this.annot.getTitle();return n!==e&&this.manager.pushUndoStack(this.annot,c.SETTITLE,{annot:this.annot,oldTitle:n,newTitle:e}),t}))},n.handleSetSubject=function(t){const n=this.annot.getSubject();return t().then((t=>{const e=this.annot.getSubject();return n!==e&&this.manager.pushUndoStack(this.annot,c.SETSUBJECT,{annot:this.annot,oldSubject:n,newSubject:e}),t}))},n.handleSetColor=function(t){const n=this.annot.getBorderColor();return t().then((t=>{const e=this.annot.getBorderColor();return n!==e&&this.manager.pushUndoStack(this.annot,c.SETCOLOR,{annot:this.annot,oldColor:n,newColor:e}),t}))},n.handleSetOpacity=function(t,n=!0,e){n&&e&&e.oldValue!==e.commitValue&&this.manager.pushUndoStack(this.annot,c.SETOPACITY,{annot:this.annot,oldOpacity:e.oldValue,newOpacity:e.commitValue});const o=this.annot.getOpacity();return t().then((t=>{const r=this.annot.getOpacity();return n&&!e&&o!==r&&this.manager.pushUndoStack(this.annot,c.SETOPACITY,{annot:this.annot,oldOpacity:o,newOpacity:r}),t}))},n.handleSetFillColor=function(t){let n=this.annot.getStyleFillColor||this.annot.getFillColor,e=n.call(this.annot);return t().then((t=>{let o=n.call(this.annot);return e!==o&&this.manager.pushUndoStack(this.annot,c.SETFILLCOLOR,{annot:this.annot,oldFillColor:e,newFillColor:o}),t}))},n.handleSetBorderWidth=function(t,n,e){n&&e&&e.oldValue!==e.commitValue&&this.manager.pushUndoStack(this.annot,c.SETBORDERWIDTH,{annot:this.annot,oldBorderWidth:e.oldValue,newBorderWidth:e.commitValue});let o=this.annot.getBorderWidth();return t().then((t=>{let r=this.annot.getBorderWidth();return n&&!e&&o!==r&&this.manager.pushUndoStack(this.annot,c.SETBORDERWIDTH,{annot:this.annot,oldBorderWidth:o,newBorderWidth:r}),t}))},n.handleSetBorderStyle=function(t){let n=this.annot.getBorderStyleWithParam();return t().then((t=>{let e=this.annot.getBorderStyleWithParam();return n!==e&&this.manager.pushUndoStack(this.annot,c.SETBORDERSTYLE,{annot:this.annot,oldBorderStyle:n,newBorderStyle:e}),t}))},n.handleSetBorderInfo=function(t){const n=this.annot.getBorderInfo();return this.annot.setBorderInfo(t).then((t=>{const e=this.annot.getBorderInfo();return this.manager.pushUndoStack(this.annot,c.SETBORDERINFO,{annot:this.annot,oldBorderInfo:n,newBorderInfo:e}),t}))},n.handleFlip=function(t,n){return t().then((t=>(this.controller.create("annot",c.FlipPoint,{annot:this.annot},n),t)))},n.handleSetEndingStyle=function(t,n,e){let o;o=n?this.annot.getStartStyle||this.annot.getCalloutLineEndingStyle:this.annot.getEndingStyle;let r=o.call(this.annot);return t().then((t=>{let i=o.call(this.annot);return this.controller.create("annot",c.SETENDINGSTYLE,{annot:this.annot,isStart:n,oldStyle:r,newStyle:i},e),t}))},n.handleEnableCaption=function(t){let n=this.annot.hasCaption();return t().then((t=>{let e=this.annot.hasCaption();return n!==e&&this.manager.pushUndoStack(this.annot,c.ENABLECAPTION,{annot:this.annot,oldEnableCaption:n,newEnableCaption:e}),t}))},n.handleSetRotation=function(t){const n=this.annot.getRotation(),e=this.annot.getRect();return t().then((t=>{let o=this.annot.getRotation(),r=this.annot.getRect();return this.manager.pushUndoStack(this.annot,c.SETROTATION,{annot:this.annot,oldRotation:n,newRotation:o,oldRect:e,newRect:r}),t}))},n.handleSetHighlightingMode=function(t){let n=this.annot.getHighlightingMode();return t().then((t=>{let e=this.annot.getHighlightingMode();return this.manager.pushUndoStack(this.annot,c.SETHIGHLIGHTINGMODE,{annot:this.annot,oldHlMode:n,newHlMode:e}),t}))},n.handleSetContent=function(t){const n=this.annot.getContent(),e=this.annot.getInnerRect&&this.annot.getInnerRect(),o=this.annot.getRect(),r=this.annot.getCalloutLinePoints&&this.annot.getCalloutLinePoints();return t().then((t=>{const i=this.annot.getContent();if(i!==n)if("freetext"===this.annot.getType()){const t=this.annot.getInnerRect(),a=this.annot.getRect(),s=this.annot.getCalloutLinePoints();this.manager.pushUndoStack(this.annot,c.SETCONTENT,{annot:this.annot,oldContent:n,newContent:i,oldInnerRect:e,newInnerRect:t,oldRect:o,newRect:a,oldCalloutLinePoints:r,newCalloutLinePoints:s})}else this.manager.pushUndoStack(this.annot,c.SETCONTENT,{annot:this.annot,oldContent:n,newContent:i});return t}))},n.handlePlaceRedact=function(t){return t().then((t=>{const n=t.flat().flat().flat().filter((t=>"redact"===t.getType()));return this.manager.pushUndoStack(this.annot,c.PLACEREDACT,{redacts:n}),t}))},n.handleSetDefaultAppearance=function(t){const n=this.annot.getDefaultAppearance();return t().then((t=>{let e=this.annot.getDefaultAppearance();this.manager.pushUndoStack(this.annot,c.DEFAULTAP,{annot:this.annot,oldDA:n,newDA:e})}))},n.handleSetFlags=function(t){const n=this.annot.getFlags();return t().then((t=>{let e=this.annot.getFlags();this.manager.pushUndoStack(this.annot,c.FLAG,{annot:this.annot,oldFlag:n,newFlag:e})}))},n.handleSetAction=function(t,n,e,o){return t().then((t=>{this.manager.pushUndoStack(this.annot,c.ADDACTION,{annot:this.annot,param:{action:n,trigger:e,append:o}})}))},n.handleRemoveAction=function(t,n,e){let o=O("screen"==this.annot.getType()?this.annot.getAdditionalAction(n):this.annot.getAction()),r=-1;return e&&(r=o.findIndex((t=>t.info.objNumber===e.info.objNumber))),t().then((t=>{this.manager.pushUndoStack(this.annot,c.REMOVEACTION,{annot:this.annot,param:{trigger:n,index:r,oldActions:o}})}))},n.handleMoveAction=function(t){return this.annot.moveAction(t).then((n=>{this.manager.pushUndoStack(this.annot,c.MOVEACTION,{annot:this.annot,moveInfo:t})}))},n.handleSetActionData=function(t,n){let e=new f(t.info).toJson();return this.annot.setActionData(t,n).then((o=>{this.manager.pushUndoStack(this.annot,c.UPDATEACTION,{annot:this.annot,action:t,oldData:e,newData:n})}))},n.handleSetRect=function(t){const n=this.annot.getRect(),e=this.annot.getInnerRect();return this.annot.setRect(t).then((()=>{this.manager.pushUndoStack(this.annot,c.SETRECT,{annot:this.annot,oldRect:n,oldInnerRect:e,newRect:this.annot.getRect(),newInnerRect:this.annot.getInnerRect()})}))},t}(),Z=function(){function t(t,n){this.pdfViewer=t,this.controller=n,this.handledAnnotCount=0}var n=t.prototype;return n.requireMergeLast=function(t){if(this.handledAnnotCount++,!this.firstUndoAnnot)return this.firstUndoAnnot=t,this.activateAnnots||(this.activateAnnots=this.pdfViewer.getAllActivatedElements().map((t=>t.annot)).filter(Boolean).filter((t=>"widget"!==t.getType()))),0===this.activateAnnots.length||-1===this.activateAnnots.indexOf(t)?(this.handledAnnotCount--,this.firstUndoAnnot=void 0,this.activateAnnots=void 0):this.activateAnnots.length===this.handledAnnotCount&&this.reset(),!1;-1===this.activateAnnots.indexOf(t)&&this.handledAnnotCount--;const n=this.activateAnnots.length;return this.handledAnnotCount===n?(this.reset(),!0):n>1},n.reset=function(){this.firstUndoAnnot=void 0,this.handledAnnotCount=0,this.activateAnnots=void 0},n.pushUndoStack=function(t,n,e){if(!this.pdfViewer.customs.pushUndoStack||this.pdfViewer.customs.pushUndoStack(n,e))return this.controller.create("annot",n,e,this.requireMergeLast(t))},t}();const tt=UIExtension.UIEvents;let nt=function(){function t(t,n){this.pdfViewer=t,this.undoRedoManager=n,this.annoutInitStatesManager={};let e=Promise.resolve();this.interpreter={annot:new N(t),user:new D(t),bookmark:new j(t),attachment:new Y(t),rotatePage:new $(t),undo:function(t){return e=e.finally((()=>t.undo()))},redo:function(t){return e=e.finally((()=>t.redo()))}},this.annotUndoRedoManager=new Z(t,this)}var n=t.prototype;return n.getAnnotHandler=function(t){return new Q(this,t)},n.before=function(t,n,e){this.beforeData={type:t,fnName:n,data:e}},n.after=function(t,n,e,o=!1){const r=this.beforeData;r.type===t||r.fnName===n?this.create(t,n,s(r.data,e),o):this.beforeData=null},n.create=function(t,n,e,o=!1){1===Object.keys(e).length&&e.annot&&(this.annoutInitStatesManager[e.annot.objectNumber]=e.annot);const r=this.interpreter[t][n](e);let i;i=o?this.undoRedoManager.mergeLast(r):this.undoRedoManager.storage(r);const a=this.undoRedoManager.getRedoStack().clear();return this.pdfViewer.eventEmitter.emit(tt.undoRedoStoreChange,this),()=>{i(),a()}},n.removeByName=function(t){this.undoRedoManager.removeByName(t),this.pdfViewer.eventEmitter.emit(tt.undoRedoStoreChange,this)},n.clear=function(){this.undoRedoManager.clear(),this.annoutInitStatesManager={};const{bookmark:t,attachment:n,rotatePage:e}=this.interpreter;[t,n,e].forEach((t=>{t.clear()})),this.pdfViewer.eventEmitter.emit(tt.undoRedoStoreChange,null,"clearAll")},n.undo=function(){let t=this.undoRedoManager.undo();if(t){const n=this.interpreter.undo(t);return this.pdfViewer.eventEmitter.emit(tt.undoRedoStoreChange,this),this.pdfViewer.eventEmitter.emit(J,!0),n}},n.redo=function(){let t=this.undoRedoManager.redo();if(t){const n=this.interpreter.redo(t);return this.pdfViewer.eventEmitter.emit(tt.undoRedoStoreChange,this),this.pdfViewer.eventEmitter.emit(J,!1),n}},n.popUndoStack=function(){this.undoRedoManager.getUndoStack().pop()},n.undoAll=function(){for(let t in this.annoutInitStatesManager){let n=this.annoutInitStatesManager[t],e=this.pdfViewer.getAnnotRender(n.page.info.index,n.objectNumber);e&&e.component&&e.component.hideUI()}let t=this,n="",e=[];for(;n=this.undoRedoManager.undo();)!function(n){e.push((()=>t.interpreter.undo(n)))}(n);return e.reduce(((t,n)=>t.then((()=>n()))),Promise.resolve())},t}();a.UIEvents;let et=function(){function t(t,n){this.pdfViewer=t,this.controller=n}var n=t.prototype;return n.init=function(){this.bindEvent()},n.bindEvent=function(){},n.pushUndoStack=function(t,n){this.controller.create("bookmark",t,n)},t}();a.UIEvents;let ot=function(){function t(t,n){this.pdfViewer=t,this.controller=n}var n=t.prototype;return n.init=function(){this.bindEvent()},n.bindEvent=function(){},n.pushUndoStack=function(t,n){this.controller.create("attachment",t,n)},t}();a.UIEvents;let rt=function(){function t(t,n){this.pdfViewer=t,this.controller=n}var n=t.prototype;return n.init=function(){this.bindEvent()},n.bindEvent=function(){},n.pushUndoStack=function(t,n){this.controller.create("rotatePage",t,n)},t}();var it=r(5778);const at=r.n(it)()||it,{ApplicationContextImpl:st,Aspect:ct,BROWSER_DETECTION:ut,BasicIoCStrategy:lt,BrowserInfo:ft,BuiltinIntersectionObserver:pt,CLIPBOARD_DATA_TYPES:dt,Color:ht,DEVICE_DETACTION:yt,DebounceAsyncTaskExecutor:Et,DebounceTaskExecutor:gt,DeviceInfo:vt,Disposable:Tt,EDITABLE_ELEMENT_SHORTCUTS:mt,ExecutionContext:St,IOC_SHARED_SINGLETON:At,IOC_SINGLETON:Ot,IoCScope:bt,KEYBOARD_LOCATION:Rt,KeyCodes:wt,KeyboardImpl:Nt,KeyboardUtils:It,Lazy:xt,Log_Levels:Ct,Logger:_t,LoggerFactory:Pt,MODULE_LICENSE_INFO:Lt,NoLogger:Dt,PrototypeIoCStrategy:jt,Proxy:kt,QueuedAsyncTaskExecutor:Mt,Reflect:Ut,SHARED_STRATEGY:Vt,STANDARD_HTML_ELEMENTS:Ft,SYSTEM_DEFAULT_SHORTCUTS:Bt,Shortcut:Gt,ShortcutContextImpl:Ht,ShortcutEventApportunity:Yt,ShortcutEventImpl:Wt,SingletonIoCStrategy:Kt,Store:zt,ThrottleAsyncTaskExecutor:Xt,ThrottleTaskStatus:$t,ValueStore:qt,Watcher:Jt,addClass:Qt,appOnly:Zt,assertThat:tn,attachContextMenuEvent:nn,attachKeypressEvent:en,browser:on,checkHighContrast:rn,colorConvertor:an,setThemeColor:sn,config:cn,convertFromNumberToHex:un,convertFromNumberToJSColor:ln,convertFromNumberToRGBA:fn,copyText:pn,createClass:dn,createClickEvent:hn,createDOM:yn,createDeferred:En,createFocusEvent:gn,cssText:vn,dayjs:Tn,debounce:mn,dom:Sn,doms:An,dpr:On,eventPath:bn,excludeCommandInterceptor:Rn,excludeEditableElementInterceptor:wn,extToMimeType:Nn,extendOptions:In,focusNeedBeOn:xn,getCanvasPixelRatio:Cn,getDPI:_n,getKey:Pn,getPtPxRatio:Ln,getPxPtRatio:Dn,getTransparentOrColor:jn,getUniqueId:kn,includeCommandInterceptor:Mn,interceptors:Un,invokeAddDestroyHook:Vn,invokeAllInjected:Fn,invokeDestroy:Bn,invokeInjected:Gn,invokePullout:Hn,is360:Yn,isAliAppBrowser:Wn,isAlt:Kn,isAltLeft:zn,isAltRight:Xn,isAndroid:$n,isBaidu:qn,isBlackBerry:Jn,isChrome:Qn,isChromiumEdge:Zn,isCtrl:te,isCtrlLeft:ne,isCtrlRight:ee,isDefined:oe,isDesktop:re,isEdge:ie,isEditable:ae,isEditableElement:se,isEnd:ce,isEnter:ue,isFirefox:le,isFunction:fe,isGecko:pe,isHome:de,isHuawei:he,isHuaweiBrowser:ye,isIE:Ee,isIE10:ge,isIE10Compact:ve,isIE8:Te,isIE8Compact:me,isIE9Compact:Se,isIEAtLeast11:Ae,isIOS:Oe,isIOSChrome:be,isIPAD:Re,isIPHONE:we,isIPOD:Ne,isInteger:Ie,isKey:xe,isKindle:Ce,isLazy:_e,isLiebao:Pe,isLinux:Le,isMac:De,isMacOS:je,isMatch:ke,isMaxthon:Me,isMeta:Ue,isMetaLeft:Ve,isMetaRight:Fe,isMiPad:Be,isMiuiBrowser:Ge,isMobile:He,isNumber:Ye,isNumberInRange:We,isNumpadEnter:Ke,isOpera:ze,isQQ:Xe,isQuirksMode:$e,isRunningInBrowser:qe,isRunningInWorker:Je,isSafari:Qe,isSamePoint:Ze,isShift:to,isShiftLeft:no,isShiftPressedKey:eo,isShiftRight:oo,isSougou:ro,isSpace:io,isSquaredNumber:ao,isStandardEnter:so,isString:co,isTablet:uo,isTeamsAndroid:lo,isTouchDevice:fo,isChromebook:po,isUC:ho,isValidNumber:yo,isValidRange:Eo,isValidRotationAngle:go,isWeChat:vo,isWebOS:To,isWebkit:mo,isWindows:So,isXiaomi:Ao,keyCodeToKey:Oo,keyboardStatus:bo,match:Ro,matchers:wo,noop:No,notImplemented:Io,observeResize:xo,onTap:Co,preventDefaultInterceptor:_o,preventFastClickByKeydown:Po,removeClass:Lo,setLogLevel:Do,simulateKey:jo,singletonCreator:ko,standardColorAsARGBNumber:Mo,stopPropagationOnShortcutEvent:Uo,strLogLevel2Num:Vo,toggleClassByFlag:Fo,toggleLogOff:Bo,unsupported:Go,useJQuery:Ho,diffRender:Yo,kebabCaseToPascalCase:Wo}=at.commons;function Ko(t){return Ko="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ko(t)}function zo(t){var n=function(t,n){if("object"!==Ko(t)||null===t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var o=e.call(t,n||"default");if("object"!==Ko(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(t,"string");return"symbol"===Ko(n)?n:String(n)}function Xo(t,n){for(var e=0;e<n.length;e++){var o=n[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,zo(o.key),o)}}function $o(t,n,e){return n&&Xo(t.prototype,n),e&&Xo(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}const qo="vertical",Jo="horizontal";let Qo=function(){function t(t,n){this.fromInchRate=t,this.name=n,Object.defineProperties(this,{fromInchRate:{value:t,enumerable:!0,writable:!1,configurable:!0},name:{value:n,enumerable:!0,writable:!1,configurable:!0}})}var n=t.prototype;return n.convertTo=function(t,n){return t/this.fromInchRate*n.fromInchRate},n.convertAreaTo=function(t,n){return t/Math.pow(this.fromInchRate,2)*Math.pow(n.fromInchRate,2)},$o(t,[{key:"isPixel",get:function(){return!1}}]),t}(),Zo=function(t){function n(n){var e;return(e=t.call(this,0,"px")||this).orientation=n,Object.defineProperty(function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(e),"fromInchRate",{get(){const t=_n();switch(n){case Jo:return t.x;case qo:return t.y;default:return t.x}}}),e}return o(n,t),$o(n,[{key:"isPixel",get:function(){return!0}}]),n}(Qo);var tr={inch:"inch",custom:"custom",mi:"mi",pt:"pt",ft:"ft",yd:"yd",km:"km",m:"m",cm:"cm",mm:"mm",pica:"pica"};const nr=new Qo(1,tr.inch),er=new Qo(1,tr.custom),or=new Qo(1/63360,tr.mi),rr=new Qo(72,tr.pt),ir=new Qo(1/12,tr.ft),ar=new Qo(1/36,tr.yd),sr=new Qo(.0254/1e3,tr.km),cr=new Qo(.0254,tr.m),ur=new Qo(2.54,tr.cm),lr=new Qo(25.4,tr.mm),fr=new Qo(6,tr.pica),pr=new Zo(Jo),dr=(new Zo(qo),{[nr.name]:nr,[er.name]:er,[or.name]:or,[rr.name]:rr,[ir.name]:ir,[ar.name]:ar,[sr.name]:sr,[cr.name]:cr,[ur.name]:ur,[lr.name]:lr,[fr.name]:fr,[pr.name]:pr});function hr(t){switch(t=(t=t.toLowerCase()).replace(/[^a-z]/g,"")){case"in":t="inch";break;case"p":t="pica"}return dr[t]}function yr(t,n,e){if(n&&!Array.isArray(n)&&"number"==typeof n.length){var o=n.length;return function(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,o=new Array(n);e<n;e++)o[e]=t[e];return o}(n,void 0!==e&&e<o?e:o)}return t(n,e)}function Er(t,e){if(!t)return;if("popup"===t.getType()||t.isStateAnnot&&t.isStateAnnot())return t;const r=kt.getProxyClass(t.constructor,(function(e,o,r){return o.call.apply(o,[t].concat(yr(n,r)))}),(function(){})),i=e.getAnnotHandler(t),a=e.annotUndoRedoManager;let u=function(t){function n(){return t.apply(this,arguments)||this}o(n,t);var e=n.prototype;return e.setContent=function(n){return i.handleSetContent((()=>t.prototype.setContent.call(this,n)))},e.setRect=function(t){return i.handleSetRect(t)},e.setBorderColor=function(n){return i.handleSetColor((()=>t.prototype.setBorderColor.call(this,n)))},e.setBorderInfo=function(t){return i.handleSetBorderInfo(t)},e.setFlags=function(n,e){return i.handleSetFlags((()=>t.prototype.setFlags.call(this,n,e)))},n}(r);return t.isMarkup()&&(u=function(n){function e(){return n.apply(this,arguments)||this}o(e,n);var r=e.prototype;return r.setOpacity=function(t){return i.handleSetOpacity((()=>n.prototype.setOpacity.call(this,t)),!0,null)},r.setSubject=function(t){return i.handleSetSubject((()=>n.prototype.setSubject.call(this,t)))},r.setTitle=function(t){return i.handleSetTitle((()=>n.prototype.setTitle.call(this,t)))},r.addReply=async function(e){const o=await n.prototype.addReply.call(this,e);return o&&a.pushUndoStack(t,c.ADDREPLY,{annot:t,replyAnnot:o}),o},r.addReviewState=async function(e){const o=await n.prototype.addReviewState.call(this,e);return o&&a.pushUndoStack(t,c.ADDREVIEWSTATE,{annot:t,stateName:e}),o},r.addMarkedState=async function(e){const o=await n.prototype.addMarkedState.call(this,e);return o&&a.pushUndoStack(t,c.ADD_MARKED_STATE,{annot:t,stateName:e}),o},e}(u)),t.setFillColor&&(u=function(t){function n(){return t.apply(this,arguments)||this}return o(n,t),n.prototype.setFillColor=function(n){return i.handleSetFillColor((()=>t.prototype.setFillColor.call(this,n)))},n}(u)),t.setMeasureRatio&&t.getMeasureRatio&&(u=function(n){function e(){return n.apply(this,arguments)||this}return o(e,n),e.prototype.setMeasureRatio=function(e){const o=function(t){const n=t.match(/(\d+(\.\d+)?)\s+(\w+)\s+=\s+(\d+(\.\d+)?)\s+(\w+)/);if(!n)return;let[,e,,o,r,,i]=n;return"in"===o&&(o="inch"),"in"===i&&(i="inch"),{fScale:parseFloat(e),fUnit:hr(o),tScale:parseFloat(r),tUnit:hr(i)}}(n.prototype.getMeasureRatio.call(this))||{fScale:1,fUnit:tr.inch,tScale:1,tUnit:tr.inch};"object"==typeof o.fUnit&&(o.fUnit=o.fUnit.name),"object"==typeof o.tUnit&&(o.tUnit=o.tUnit.name);const r={userSpaceValue:o.fScale,userSpaceUnit:o.fUnit,realValue:o.tScale,realUnit:o.tUnit},i=s({},e);return n.prototype.setMeasureRatio.call(this,e).then((()=>{a.pushUndoStack(t,c.SET_MEASUREMENT_RATIO,{annot:t,oldMeasureRatio:r,newMeasureRatio:i})}))},e}(u)),t.getMeasureUnit&&t.setMeasureUnit&&(u=function(n){function e(){return n.apply(this,arguments)||this}return o(e,n),e.prototype.setMeasureUnit=function(e){const o=n.prototype.getMeasureUnit.call(this);return n.prototype.setMeasureUnit.call(this,e).then((()=>{a.pushUndoStack(t,c.SET_MEASUREMENT_UNIT,{annot:t,oldUnit:o,newUnit:e})}))},e}(u)),t.setMeasureConversionFactor&&t.getMeasureConversionFactor&&(u=function(n){function e(){return n.apply(this,arguments)||this}return o(e,n),e.prototype.setMeasureConversionFactor=function(e){const o=n.prototype.getMeasureConversionFactor.call(this);return n.prototype.setMeasureConversionFactor.call(this,e).then((()=>{a.pushUndoStack(t,c.SET_MEASURE_CONVERSION_FACTOR,{annot:t,oldFactor:o,newFactor:e})}))},e}(u)),t.enableCaption&&(u=function(t){function n(){return t.apply(this,arguments)||this}return o(n,t),n.prototype.enableCaption=function(n){return i.handleEnableCaption((()=>t.prototype.enableCaption.call(this,n)))},n}(u)),t.setCaptionColor&&(u=function(n){function e(){return n.apply(this,arguments)||this}return o(e,n),e.prototype.setCaptionColor=function(e){const o=n.prototype.getCaptionColor.call(this);return n.prototype.setCaptionColor.call(this,e).then((()=>{a.pushUndoStack(t,c.SET_CAPTION_COLOR,{annot:t,oldCaptionColor:o,newCaptionColor:e})}))},e}(u)),t.setEndPoint&&t.getEndPoint&&(u=function(n){function e(){return n.apply(this,arguments)||this}return o(e,n),e.prototype.setEndPoint=async function(e){const o=n.prototype.getEndPoint.call(this);await n.prototype.setEndPoint.call(this,e);const r=n.prototype.getEndPoint.call(this);a.pushUndoStack(t,c.SET_END_POINT,{annot:t,oldEndPoint:o,newEndPoint:r})},e}(u)),t.setStartPoint&&t.getStartPoint&&(u=function(n){function e(){return n.apply(this,arguments)||this}return o(e,n),e.prototype.setStartPoint=async function(e){const o=n.prototype.getStartPoint.call(this);await n.prototype.setStartPoint.call(this,e);const r=n.prototype.getStartPoint.call(this);a.pushUndoStack(t,c.SET_START_POINT,{annot:t,oldStartPoint:o,newStartPoint:r})},e}(u)),t.setEndingStyle&&t.getEndingStyle&&(u=function(t){function n(){return t.apply(this,arguments)||this}return o(n,t),n.prototype.setEndingStyle=async function(n,e){return i.handleSetEndingStyle((()=>t.prototype.setEndingStyle.call(this,n,e)),n,e)},n}(u)),t.setStyleFillColor&&t.setStyleFillColor&&(u=function(n){function e(){return n.apply(this,arguments)||this}return o(e,n),e.prototype.setStyleFillColor=async function(e){const o=n.prototype.getStyleFillColor.call(this);await n.prototype.setStyleFillColor.call(this,e),a.pushUndoStack(t,c.SET_STYLE_FILL_COLOR,{annot:t,oldStyleFillColor:o,newStyleFillColor:e})},e}(u)),t.setLeaderLineExtend&&t.getLeaderLineExtend&&(u=function(n){function e(){return n.apply(this,arguments)||this}return o(e,n),e.prototype.setLeaderLineExtend=async function(e){const o=this.getLeaderLineExtend();await n.prototype.setLeaderLineExtend.call(this,e),a.pushUndoStack(t,c.SET_LEADER_LINE_EXTEND,{annot:t,oldLength:o,newLength:e})},e}(u)),t.setLeaderLineOffset&&t.getLeaderLineOffset&&(u=function(n){function e(){return n.apply(this,arguments)||this}return o(e,n),e.prototype.setLeaderLineOffset=async function(e){const o=this.getLeaderLineOffset();await n.prototype.setLeaderLineOffset.call(this,e),a.pushUndoStack(t,c.SET_LEADER_LINE_OFFSET,{annot:t,oldOffset:o,newOffset:e})},e}(u)),t.setLeaderLineLength&&t.getLeaderLineLength&&(u=function(n){function e(){return n.apply(this,arguments)||this}return o(e,n),e.prototype.setLeaderLineLength=async function(e){const o=this.getLeaderLineLength();await n.prototype.setLeaderLineLength.call(this,e),a.pushUndoStack(t,c.SET_LEADER_LINE_LENGTH,{annot:t,oldLength:o,newLength:e})},e}(u)),t.setCaptionOffset&&t.getCaptionOffset&&(u=function(n){function e(){return n.apply(this,arguments)||this}return o(e,n),e.prototype.setCaptionOffset=async function(e,o){const r=this.getCaptionOffset();await n.prototype.setCaptionOffset.call(this,e,o);const i=this.getCaptionOffset();a.pushUndoStack(t,c.SET_CAPTION_OFFSET,{annot:t,oldOffset:r,newOffset:i})},e}(u)),t.getVertexes&&(u=function(n){function e(){return n.apply(this,arguments)||this}o(e,n);var r=e.prototype;return r.updateVertexes=async function(e,o){const r=n.prototype.getVertexes.call(this);await n.prototype.updateVertexes.call(this,e,o);const i=n.prototype.getVertexes.call(this);a.pushUndoStack(t,c.UPDATEVERTEXES,{annot:t,oldIndex:e,newIndex:e,newVertexes:i,oldVertexes:r})},r.setVertexes=async function(e){const o=n.prototype.getVertexes.call(this);await n.prototype.setVertexes.call(this,e);const r=n.prototype.getVertexes.call(this);a.pushUndoStack(t,c.SET_VERTEXES,{annot:t,newVertexes:r,oldVertexes:o})},e}(u)),t.setIconName&&t.getIconName&&(u=function(n){function e(){return n.apply(this,arguments)||this}return o(e,n),e.prototype.setIconName=async function(e){const o=n.prototype.getIconName.call(this),r=await n.prototype.setIconName.call(this,e),i=n.prototype.getIconName.call(this);return o===i||a.pushUndoStack(t,c.SETICONNAME,{annot:t,oldIconName:o,newIconName:i}),r},e}(u)),t.getAlignment&&t.setAlignment&&(u=function(n){function e(){return n.apply(this,arguments)||this}return o(e,n),e.prototype.setAlignment=async function(e){const o=n.prototype.getAlignment.call(this),r=await n.prototype.setAlignment.call(this,e),i=n.prototype.getAlignment.call(this);return o===i||a.pushUndoStack(t,c.SET_ALIGNMENT,{annot:t,oldAlignment:o,newAlignment:i}),r},e}(u)),"freetext"===t.getType()&&(u=function(n){function e(){return n.apply(this,arguments)||this}o(e,n);var r=e.prototype;return r.setInnerRect=async function(e){const o=n.prototype.getInnerRect.call(this),r=await n.prototype.setInnerRect.call(this,e),i=n.prototype.getInnerRect.call(this);return a.pushUndoStack(t,c.SET_INNER_RECT,{annot:t,oldInnerRect:o,newInnerRect:i}),r},r.setCalloutLinePoints=async function(e){const o=n.prototype.getRect.call(this),r=n.prototype.getCalloutLinePoints.call(this),i=n.prototype.getInnerRect.call(this),s=await n.prototype.setCalloutLinePoints.call(this,e),u=n.prototype.getRect.call(this),l=n.prototype.getCalloutLinePoints.call(this),f=n.prototype.getInnerRect.call(this);return a.pushUndoStack(t,c.UPDATECALLOUTPOINTS,{annot:t,oldRect:o,oldCalloutLinePoints:r,oldInnerRect:i,newRect:u,newCalloutLinePoints:l,newInnerRect:f}),s},r.setCalloutLineEndingStyle=async function(e){const o=n.prototype.getCalloutLineEndingStyle.call(this),r=await n.prototype.setCalloutLineEndingStyle.call(this,e),i=n.prototype.getCalloutLineEndingStyle.call(this);return o!==i&&a.pushUndoStack(t,c.SET_CALLOUT_LINE_ENDING_STYLE,{annot:t,oldStyle:o,newStyle:i}),r},e}(u)),t.setDefaultAppearance&&t.getDefaultAppearance&&(u=function(n){function e(){return n.apply(this,arguments)||this}return o(e,n),e.prototype.setDefaultAppearance=async function(e){const o=n.prototype.getDefaultAppearance.call(this),r=await n.prototype.setDefaultAppearance.call(this,e),i=n.prototype.getDefaultAppearance.call(this);return a.pushUndoStack(t,c.SET_DEFAULT_APPEARANCE,{annot:t,oldAp:o,newAp:i}),r},e}(u)),t.setRotation&&t.getRotation&&(u=function(t){function n(){return t.apply(this,arguments)||this}return o(n,t),n.prototype.setRotation=async function(n){return i.handleSetRotation((()=>t.prototype.setRotation.call(this,n)))},n}(u)),t.setInkList&&(u=function(n){function e(){return n.apply(this,arguments)||this}return o(e,n),e.prototype.setInkList=async function(e){const o=n.prototype.getInkList.call(this),r=await n.prototype.setInkList.call(this,e),i=n.prototype.getInkList.call(this);return a.pushUndoStack(t,c.SET_INK_LIST,{annot:t,oldInkList:o,newInkList:i}),r},e}(u)),t.setHighlightingMode&&(u=function(t){function n(){return t.apply(this,arguments)||this}return o(n,t),n.prototype.setHighlightingMode=async function(n){return i.handleSetHighlightingMode((()=>t.prototype.setHighlightingMode.call(this,n)))},n}(u)),t.setAction&&(u=function(t){function n(){return t.apply(this,arguments)||this}return o(n,t),n.prototype.setAction=async function(n,e,o){return i.handleSetAction((()=>t.prototype.setAction.call(this,n,e,o)),n,e,o)},n}(u)),t.moveAction&&(u=function(t){function n(){return t.apply(this,arguments)||this}return o(n,t),n.prototype.moveAction=async function(t){return i.handleMoveAction(t)},n}(u)),t.removeAction&&(u=function(t){function n(){return t.apply(this,arguments)||this}return o(n,t),n.prototype.removeAction=async function(n,e){return i.handleRemoveAction((()=>t.prototype.removeAction.call(this,n,e)),n,e)},n}(u)),t.setActionData&&(u=function(t){function n(){return t.apply(this,arguments)||this}return o(n,t),n.prototype.setActionData=async function(t,n){return i.handleSetActionData(t,n)},n}(u)),"redact"===t.getType()&&(u=function(n){function e(){return n.apply(this,arguments)||this}o(e,n);var r=e.prototype;return r.setOverlayText=async function(e){const o=n.prototype.getOverlayText.call(this),r=await n.prototype.setOverlayText.call(this,e),i=n.prototype.getOverlayText.call(this);return i!==o&&a.pushUndoStack(t,c.SET_OVERLAY_TEXT,{annot:t,newValue:i,oldValue:o}),r},r.removeOverlayText=async function(){const e=n.prototype.getOverlayText.call(this),o=await n.prototype.removeOverlayText.call(this);return void 0!==e&&a.pushUndoStack(t,c.REMOVE_OVERLAY_TEXT,{annot:t,oldValue:e}),o},r.setOverlayTextAlignment=async function(e){const o=n.prototype.getOverlayTextAlignment.call(this),r=await n.prototype.setOverlayTextAlignment.call(this,e),i=n.prototype.getOverlayTextAlignment.call(this);return i!==o&&a.pushUndoStack(t,c.SET_OVERLAY_TEXT_ALIGNMENT,{annot:t,newValue:i,oldValue:o}),r},r.setRepeat=async function(e){const o=n.prototype.getRepeat.call(this),r=await n.prototype.setRepeat.call(this,e),i=n.prototype.getRepeat.call(this);return i!==o&&a.pushUndoStack(t,c.SET_REPEAT,{annot:t,newValue:i,oldValue:o}),r},r.setRedactApplyFillColor=async function(e){const o=t.info.applyFillColor,r=await n.prototype.setRedactApplyFillColor.call(this,e),i=t.info.applyFillColor;return i!==o&&a.pushUndoStack(t,c.SET_REDACT_APPLY_FILL_COLOR,{annot:t,newValue:i,oldValue:o}),r},e}(u)),t.setImage&&t.getImage&&(u=function(n){function e(){return n.apply(this,arguments)||this}return o(e,n),e.prototype.setImage=async function(e){const o=await n.prototype.getImage.call(this,"buffer"),r=await n.prototype.setImage.call(this,e),i=e;return a.pushUndoStack(t,c.SET_IMAGE,{annot:t,oldValue:o,newValue:i}),r},e}(u)),new u}function gr(t,n,e){if(n&&!Array.isArray(n)&&"number"==typeof n.length){var o=n.length;return function(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,o=new Array(n);e<n;e++)o[e]=t[e];return o}(n,void 0!==e&&e<o?e:o)}return t(n,e)}function vr(t,e){let r=function(t){function n(){return t.apply(this,arguments)||this}o(n,t);var r=n.prototype;return r.addAnnot=async function(n,...o){var r;const i=await(r=t.prototype.addAnnot).call.apply(r,[this,n].concat(o));return e.create("annot",c.ADDANNOT,{annot:i[0]}),Tr(i,e)},r.removeAnnotById=async function(n){const o=(await t.prototype.getAnnots.call(this)).find((t=>n&&n===t.getUniqueID()));if(!o)return[];const r=await t.prototype.removeAnnotById.call(this,n);return 0===r.length?[]:(e.create("annot",c.REMOVEANNOT,[r,o]),r)},r.removeAnnotByObjectNumber=async function(n){const o=(await t.prototype.getAnnots.call(this)).find((t=>n===t.getId()));if(!o)return[];const r=await t.prototype.removeAnnotByObjectNumber.call(this,n);return 0===r.length?[]:(e.create("annot",c.REMOVEANNOT,[r,o]),r)},r.getAnnots=async function(...n){var o;return Tr(await(o=t.prototype.getAnnots).call.apply(o,[this].concat(n)),e)},r.getAnnotsByObjectNumArray=async function(...n){var o;return Tr(await(o=t.prototype.getAnnotsByObjectNumArray).call.apply(o,[this].concat(n)),e)},r.getAnnotsByIdArray=async function(...n){var o;return Tr(await(o=t.prototype.getAnnotsByIdArray).call.apply(o,[this].concat(n)),e)},r.getMarkupAnnots=async function(){return Tr(await t.prototype.getMarkupAnnots.call(this),e)},r.getAnnotTree=async function(){return Tr(await t.prototype.getAnnotTree.call(this),e)},n}(kt.getProxyClass(t.constructor,(function(e,o,r){return o.call.apply(o,[t].concat(gr(n,r)))}),(function(){})));return new r}function Tr(t,n){if(0===t.length)return t;var e=[];return new window.Proxy(t,{get:function(t,o){return"symbol"==typeof o?t[o]:o>-1&&o<t.length?e[o]?e[o]:e[o]=Er(t[o],n):"__isProxy"===o||t[o]}})}const mr=a.UIEvents,{BuiltinCommand:Sr,BuiltinShortcutContext:Ar,interceptors:Or}=a.PDFViewCtrl.keyboard;let br=function(){function t(t){this.pdfViewer=t}var e=t.prototype;return e.isDisabled=function(){return-1!==["touch-up-editor","page-editor"].indexOf(this.pdfViewer.stateHandlerManager.getCurrentStates().getStateName())},e.init=function(){let t=this.undoRedoManager=new g(this.pdfViewer),n=this.controller=new nt(this.pdfViewer,t);(this.annotModule=new y(this.pdfViewer,n)).init(),(this.bookmarkModule=new et(this.pdfViewer,n)).init(),(this.attachmentModule=new ot(this.pdfViewer,n)).init(),(this.rotatePageModule=new rt(this.pdfViewer,n)).init();{let t=!1,n=!1;this.pdfViewer.getKeyboard().withContext(Ar.VIEWER,(e=>{const o={interceptors:[Or.excludeEditableElementInterceptor(),Or.preventDefaultInterceptor()]};e.keydown(Sr.UNDO_OPERATION,(()=>{this.isDisabled()||t||(this.undo(),t=!0,setTimeout((()=>t=!1),300))}),o),e.keydown(Sr.REDO_OPERATION,(()=>{this.isDisabled()||n||(this.redo(),n=!0,setTimeout((()=>n=!1),300))}),o)}))}this.pdfViewer.eventEmitter.on(mr.willCloseDocument,(()=>{n.clear()}))},e.undo=function(){return this.controller.undo()},e.redo=function(){return this.controller.redo()},e.undoAll=function(){return this.controller.undoAll()},e.restMergeStatus=function(){this.annotModule.resetMergeStatus()},e.invoke=async function(t){if("function"!=typeof t)throw new Error("Incorrect parameter: The callback is not a function");const e=this.pdfViewer.getCurrentPDFDoc();return t(e?function(t,e){let r=function(t){function n(){return t.apply(this,arguments)||this}o(n,t);var r=n.prototype;return r.getPageByIndex=function(n){return t.prototype.getPageByIndex.call(this,n).then((t=>vr(t,e)))},r.getPageById=function(n){const o=t.prototype.getPageById.call(this,n);return o?vr(o,e):o},r.addAnnot=async function(n,o){const r=await t.prototype.addAnnot.call(this,n,o);return e.create("annot",c.ADDANNOT,{annot:r[0]}),Tr(r,e)},r.getAnnots=async function(){return(await t.prototype.getAnnots.call(this)).map((t=>Tr(t,e)))},n}(kt.getProxyClass(t.constructor,(function(e,o,r){return o.call.apply(o,[t].concat(gr(n,r)))}),(function(){})));return new r}(e,this.controller):null)},t}();var Rr=r(1843),wr=r.n(Rr);function Nr(t,n,e){if(n&&!Array.isArray(n)&&"number"==typeof n.length){var o=n.length;return function(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,o=new Array(n);e<n;e++)o[e]=t[e];return o}(n,void 0!==e&&e<o?e:o)}return t(n,e)}let Ir=function(t){function e(){return t.apply(this,arguments)||this}o(e,t),e.getName=function(){return"undo-redo"},e.getLoader=function(){return wr()};var r=e.prototype;return r.init=function(n){t.prototype.init.call(this,n),this.addonPromise=n.getPDFViewer().then((t=>{if(!t.collaborationOptions||!t.collaborationOptions.enable)return this.addon=new br(t),this.addon.init(),this.addon}))},r.undo=function(){return this.receiveAction("undo",[])},r.undoAll=function(){return this.receiveAction("undoAll",[])},r.redo=function(){return this.receiveAction("redo",[])},r.invoke=function(t){return this.receiveAction("invoke",[t])},r.receiveAction=function(t,e){return this.addonPromise.then((o=>{if(!o)throw new Error("undo/redo is not supported when collaboration is enabled!");return o[t].apply(o,Nr(n,e||[]))}))},e}(a.UIXAddon);var xr=Ir}(),i=i.default}()}));